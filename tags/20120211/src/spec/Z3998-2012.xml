<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="../../util/docbook/rng/docbook.rng" type="xml"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude">
    <title><!--ANSI/-->NISO Z39.98-2012</title>
    <subtitle>Authoring and Interchange Framework for Adaptive XML Publishing
        Specification</subtitle>

    <info>
        <releaseinfo>Final Draft</releaseinfo>
        <pubdate>December 19, 2011</pubdate>

       <!-- <annotation role="specLinks">
            <para role="specLabel">This version:</para>
            <para role="specLink">
                <link xlink:href="http://www.daisy.org/z3998/2012/drafts/20111219/Z3998-2012.html"
                    >http://www.daisy.org/z3998/2012/drafts/20111219/Z3998-2012.html</link>
            </para>
            <para role="specLabel">Latest version:</para>
            <para role="specLink">
                <link xlink:href="http://www.daisy.org/z3998/2012/Z3998-2012.html"
                    >http://www.daisy.org/z3998/2012/Z3998-2012.html</link>
            </para>
            <para role="specLabel">Previous version:</para>
            <para role="specLink">
                <link xlink:href="http://www.daisy.org/z3998/2012/drafts/20110328/Z3998-2011A.html"
                    >http://www.daisy.org/z3998/2012/drafts/20110328/Z3998-2011A.html</link>
            </para>
        </annotation> -->
        
        <abstract xml:id="about">
            <title>About NISO Standards</title>
            
            <para>NISO standards are developed by the Standards Committees of the National Information
                Standards Organization. The development process is a strenuous one that includes a
                rigorous peer review of proposed standards open to each NISO Voting Member and any other
                interested party. Final approval of the standard involves verification by the American
                National Standards Institute that its requirements for due process, consensus, and other
                approval criteria have been met by NISO. Once verified and approved, NISO Standards also
                become American National Standards.</para>
            <para>This standard may be revised or withdrawn at any time. For current information on the
                status of this standard contact the NISO office or visit the NISO website at:</para>
            <para><link xlink:href="http://www.niso.org">http://www.niso.org</link></para>
            <para>Published by
                <address><personname>National Information Standards Organization (NISO)</personname>
<street>One North Charles Street, Suite 1905</street>
<otheraddr>Baltimore, MD 21201</otheraddr>
<link xlink:href="http://www.niso.org">www.niso.org</link></address>
            </para>
            
            <para>Copyright Â© 2012 by the National Information Standards Organization</para>
            <para>All rights reserved under International and Pan-American Copyright Conventions. No
                part of this book may be reproduced or transmitted in any form or by any means,
                electronic or mechanical, including photocopy, recording, or any information storage or
                retrieval system, without prior permission in writing from the publisher. All inquiries
                should be addressed to NISO, One North Charles Street, Suite 1905, Baltimore, MD
                21201.</para>
            
            <para>ISBN (HTML): <remark role="todo">[to be assigned after approval]</remark></para>
            <para>ISBN (PDF): <remark role="todo">[to be assigned after approval]</remark></para>
        </abstract>
        
    </info>

    <preface xml:id="foreword">
        <title>Foreword</title>
        
        <para>(This foreword is not part of the Authoring and Interchange Framework for Adaptive
            XML Publishing Specification, NISO Z39.98-2012. It is included for information
            only.)</para>
        
        <section xml:id="forewordAbout">
            <title>About This Standard</title>
            
            <para>The Z39.98 Authoring and Interchange (Z39.98-AI) Framework for Adaptive XML
                Publishing specification defines a framework in which to develop XML markup languages to represent 
                different kinds of information resources (books, periodicals, etc.), with the intent 
                of producing documents suitable for transformation into different universally 
                accessible formats. It uses a modular, extensible architecture to permit the 
                creation of any number of document models, each custom-tailored for a particular 
                kind of information resource.</para>
            
            <para>This approach to text production differs significantly from the one taken in 
                the previous version of the standard. The text content grammar defined in
                ANSI/NISO Z39.86-2005, known as DTBook, attempted to provide a single markup
                model in which all formats could be present; it sought to define a single
                universal rendering format. Although this approach has potential merits for reader
                consumption, it could not provide the richness needed by producers in many cases
                to render high-quality individual outputs. Producing print braille compliant to 
                regional codes, as one example, was complicated by markup that was often more 
                generally useful for refreshable braille display. Accessible production by needs 
                requires the ability to repurpose content in a variety of forms for readers of 
                different abilities, and as efficiently as possible, but this need that DTBook 
                also hoped to address was not being fully realized.</para>
            
            <para>The previous text model was further complicated in that it could not be easily
                redefined for specific use cases. All content had to be structured exactly the same
                way, regardless of the form it took in its source. By focusing on accessible output
                requirements, it was also not widely useful as a production format for mainstream
                publishing requirements, limiting the ability to obtain content from source producers.</para>
            
            <para>This standard escapes the trap of defining markup models and instead focuses
                on a general, extensible and highly-adaptable framework in which content models
                can be defined. It prescribes the rules and requirements for predictable and rapid
                development of new content models without defining specifically defining the grammars.
                The development of single source master documents that can be easily 
                exchanged between organizations is the ultimate goal, but without imposing limits
                on the markup expressivity needs of any individual producer.</para>
            
            <para>The richness of markup that can be produced using this model also places this
                standard back in the mainstream. Its focus on fully representing the structure and
                meaning of the documents being described makes it a candidate for use in any
                environment in which a parallel publishing model is currently used or envisioned.
                The outputs that can be generated from documents that conform to Z39.98-AI profiles
                are not limited to accessible formats.</para>
            
            <para>
                This document has been produced by the Z39.98-AI Working Group. Information about 
                the Working Group and its members, including how to participate, is available from 
                the DAISY Consortium Web site.
            </para>
            
            <para>
                This last draft is considered stable and complete by the Working Group and has been
                endorsed by the DAISY Board.
            </para>
        </section>
        
        <section xml:id="forewordTrademarks">
            <title>Trademarks, Services Marks</title>
            <para>Wherever used in this standard, all terms that are trademarks or service marks
                are and remain the property of their respective owners.</para>
        </section>
        
        <section xml:id="forewordVotingPool">
            <title>NISO Voting Pool</title>
            <para>At the time this standard was approved, the following were members of the NISO
                Voting Pool:</para>
            <para><remark role="todo">[to be added after approval]</remark></para>
        </section>
        
        <section xml:id="forewordNCCMTC">
            <title>NISO Content and Collection Management Topic Committee</title>
            <para>At the time this standard was approved, the following individuals served on
                the NISO Content and Collection Management Topic Committee that had oversight
                for the development of this standard:</para>
            <para><remark role="todo">[to be added after approval]</remark></para>
        </section>
        
        <section xml:id="forewordWG">
            <title>NISO Z39.98 Revision Working Group</title>
            <para>The following are the members of the Z39.98 Revision Working Group responsible
                for the development of this standard: 
                <bibliolist>
                    <bibliomixed>
                        <personname>Markus Gylling</personname>, <title>Lead</title>, <orgname>DAISY
                            Consortium</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Josh Altherr</personname>, <orgname>gh, LLC</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Ole Holst Andersen</personname>, <orgname>DBB</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Marisa DeMeglio</personname>, <orgname>DAISY Consortium</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Christian Egli</personname>, <orgname>Swiss Library for the Blind,
                            Visually Impaired and Print Disabled</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Matt Garrish</personname>, <orgname>CNIB</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Boris Goldowsky</personname>, <orgname>CAST, Inc.</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Leona Holloway</personname>, <orgname>Vision Australia</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Kenny Johar</personname>, <orgname>Vision Australia</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Dennis Leas</personname>, <orgname>gh, LLC</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Sam Ogami</personname>, <orgname>California State
                            University</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Stephen Phippen</personname>, <orgname>RNIB</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>James Pritchett</personname>, <orgname>Learning Ally</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Kathryn Randall</personname>, <orgname>Vision Australia</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Per Sennels</personname>, <orgname>Huseby kompetansesenter</orgname>
                    </bibliomixed>
                </bibliolist>
            </para>
            <para>The metadata portion of this standard was created by a working group with the 
                following members: <bibliolist>
                    <bibliomixed>
                        <personname>Matt Garrish</personname>, <title>Lead</title>,
                        <orgname>CNIB</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Bob Axtell</personname>, <orgname>Library of Congress</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Wendy Taylor</personname>, <orgname>RNIB</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Christian Wallin</personname>, <orgname>DBB</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Marcus Westlind</personname>, <orgname>TPB</orgname>
                    </bibliomixed>
                    <bibliomixed>
                        <personname>Richard Wilson</personname>, <orgname>CNIB</orgname>
                    </bibliomixed>
                </bibliolist>
            </para>
        </section>
    </preface>
    
    <chapter xml:id="purposeScope">
        <title>Purpose and Scope</title>

        <section xml:id="introductionAudience">
            <title>Audience</title>

            <para> This specification details the nature of Z39.96 Authoring and Interchange Format
                (Z39.98-AI) profiles and how they are created. It is intended primarily for agencies
                interested in creating conformant profiles for new documents types and for
                processing agent developers.</para>
            <para> This specification is not a guide to marking up Z39.98-AI documents and should
                not be referenced as such. Informative resources that describe Z39.98-AI document
                production are available independently of this specification. </para>
            <para> Although this specification contains introductory sections where appropriate and
                deals with general document concepts in places, it is expected that all persons
                reading this specification will have a strong background in XML and its related
                technologies â in particular schema languages and their composition â in order to
                properly implement new profiles. </para>
        </section>

        <section xml:id="introductionDesignGoals">
            <title>Design goals</title>
            <para> The Z39.98-AI Framework has been built with the following primary design goals in
                mind: </para>

            <orderedlist>
                <listitem>
                    <para><emphasis>Adaptability</emphasis>. The Framework is designed to be
                        flexible and customizable across a wide variety of production environments.
                        Producers are not locked into a pre-defined schema, but can use the built-in
                        mechanisms for customization and extension to fit the Framework to their
                        specific requirements: profiles adapt to fit the information resources they
                        describe instead of the other way around, localizations are easily
                        implemented, and deployment in production environments spanning the gamut of
                        markup complexity â from complex/rich to simple/reduced â is easily
                        accommodated.</para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis>Modularity</emphasis>. Framework profiles are created using
                        discrete schema modules, building on and incorporating existing profiles and
                        standards where possible. The schema modules created for a profile, in turn,
                        can be reused when building other profiles, progressively decreasing the
                        work required to create each new profile. The modular aspect of the
                        framework also simplifies the development of processing tools by similarly
                        reducing the number of custom components needed to accommodate new profiles.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis>Self-describing</emphasis>. The Framework is designed to move
                        beyond the often contentious issue of XML tag names alone defining the
                        semantics of the structures they represent. Finer control over the intent
                        and meaning of markup is now offered through the layering of RDF metadata.
                        The flexibility to attach multiple bibliographic record types to a document
                        to meet the various needs it will serve is also now provided. </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis>Data repurposing</emphasis>. The primary goal of the specification
                        is to facilitate the parallel publishing of documents through its open
                        modular framework. Z39.98-AI profiles provide the essential structures that
                        compose documents in an unambiguous and format-agnostic way, and are like a
                        master blueprint to the information resources they describe. As a result,
                        Z39.98-AI documents can be manipulated through automated transformation
                        chains â such as specified by the XProc standard <xref linkend="refXPROC"/>
                        â to create output formats (e.g., print, EPUB, etc.) and to create the
                        inputs for alternate publishing processes (e.g., braille). </para>
                </listitem>
            </orderedlist>

        </section>

        <section xml:id="introductionSpecOverview">
            <title>Overview</title>

            <para> Creating <link linkend="termProfile">profiles</link> that conform to this
                specification requires understanding how the various concepts and technologies
                outlined in this document are bound together to define information resources.
                Although some readers will be sufficiently comfortable with XML technologies to jump
                straight into the specification, this overview provides a quick reference guide to
                how profiles are constructed and where the requirements are defined for both novice
                and experienced developers alike. </para>

            <para> At the core of the Z39.98-AI specification is the Abstract Document Model, which
                introduces the framework common across all profile implementations, and the
                high-level rules to which profile creators must adhere in order to ensure
                consistency and predictability between grammars. The Abstract Document Model is like
                a map to building profiles and its concepts are fully introduced in <xref
                    linkend="abstractDocumentModel"/>. </para>

            <para> Understanding the Abstract Document Model is essential to understanding the rest
                of the specification, as the process of creating profiles involves formalizing rules
                to enforce the abstract concepts, as illustrated in the following diagram: </para>

            <figure xml:id="fig001">
                <title>Overview of the Z39.98-AI profile creation process</title>
                <mediaobject>
                    <alt> The image shows the process of creating a profile through a flowchart-like
                        procession of boxes moving from top to bottom. At the top is the Abstract
                        Document Model, which is the starting point for creating any profile, as it
                        describes the composition rules. An arrow leads from this box to a more
                        intricate series of bounded boxes that together constitute profiles. Immediately
                        inside this profile box is a box that contains the main elements in creating a
                        markup model for a profile. The first component is the core markup model, which
                        is composed of the core modules and any other modules used. The second component
                        depicts the extensions and adaptations that go into creating the markup model:
                        features, metadata, and the semantic inflection of elements. The profiles box
                        then has an arrow that leads to the final outputs of the process: the
                        publication of the profile via its resource directory document and the ability
                        to package documents in an OCF-based container. </alt>
                    <imageobject>
                        <imagedata fileref="./img/ai-overview.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para> Profiles are the practical product of the Z39.98-AI specification and take the
                form of <link linkend="termMarkupModel">markup models</link> defining the structure
                of information resources. The rules and requirements for creating them are detailed
                in <xref linkend="profiles"/>. </para>

            <para> Profiles are built on a modular model, allowing <link
                    linkend="termModuleComponentDefinition">component definitions</link> to be
                reused across Z39.98-AI profiles and to be included from other industry-standard
                grammars. The following sections of the specification introduce the various parts in
                their construction: </para>

            <itemizedlist>
                <listitem>
                    <para>
                        <xref linkend="modules"/> â Modules are sets of elements and attributes that
                        are semantically and/or structurally linked through the traits they exhibit.
                        Modules are activated when creating profiles and their components become the
                        building blocks for composing the new grammar. </para>
                </listitem>
                <listitem>
                    <para>
                        <xref linkend="coreModules"/> â The core modules are a set of modules
                        developed by the Z39.98-AI Working Group to encourage reuse of components
                        across profiles. </para>
                </listitem>
                <listitem>
                    <para>
                        <xref linkend="features"/> â Like a cross between profiles in miniature and
                        highly-specialized modules, features provide comprehensive markup to
                        represent very particular kinds of structures (e.g. MathML, Ruby, etc.).
                        Features help ensure the consistency of specialized markup between Z39.98-AI
                        documents and ensure that Z39.98-AI profiles are properly aligned with
                        industry standards. </para>
                </listitem>
            </itemizedlist>

            <para> RDF is the primary means provided by the Framework for the expression of metadata
                about documents and for the semantic inflection of meaning on elements they contain.
                Although profile creators may use other methods to annotate their data, the use of
                    <link linkend="termRDFVocab">RDF vocabularies</link> is encouraged because of
                their tight binding to the specification. Information on how to apply the available
                attributes and vocabularies can be found in <xref linkend="rdfVocabularies"/>. </para>

            <para> A completed profile will typically consist of a variety of different resources,
                such as schema files, RDF vocabularies, additional prose restrictions as well as
                usage and other documentation. The publishing of a profile is the act of assigning
                it an identity URI (see <xref linkend="profileConformanceIdentityURI"/>), at which
                location a <link linkend="termRD">resource directory</link> document is available
                that enumerates these resources and provides additional information on how to obtain
                them. Complete information on how to create resource directories and documents is
                available in <xref linkend="resourcedirectory"/>. </para>

            <para> This specification also includes a catalog of profiles that have been made
                publicly available for use creating documents (available in <xref linkend="catalogs"
                />). Producers are not required to use these profiles, but they have been designed
                for the widest use possible to encourage their adoption. The profiles represent
                fully-compliant implementations of this specification for developers or individuals
                looking for practical representations of the specification. </para>

            <para> Although this specification is not specifically intended for document creators,
                it does contain information about the general nature of document creation, including
                how to specify the profile a document conforms to, any features in use, as well as
                required metadata that must be included to identify the document. This information
                can be found in <xref linkend="documents"/>. </para>

            <para> This specification also includes a packaging format based on the Open Container
                Format <xref linkend="refOCF"/>, which may be used to bundle the XML, image, and
                other local resources that compose a <link linkend="termZAIDocumentSet">Z39.98-AI
                    document set</link>. It also specifies a MIME type <xref linkend="refRFC2046"/> for the container format to
                facilitate the interchange of these files. This information can be found in <xref
                    linkend="container"/> and in <xref linkend="mediaTypeRegistration"/>. </para>

            <para> In addition to gaining a full understanding of all the topics outlined above,
                processing agent developers must also ensure that their applications meet the
                conformance requirements detailed in <xref linkend="processingAgentConformance"/>. </para>

        </section>

        <section xml:id="relationships">
            <title>Relationship to other specifications</title>

            <section xml:id="relationshipsZ39862005">
                <title>ANSI/NISO Z39.86-2005</title>
                <para>
                    <!--ANSI/-->NISO Z39.98-2012 represents an entirely new technical direction that
                    supersedes Section 4 <link
                        xlink:href="http://www.niso.org/workrooms/daisy/Z39-86-2005.html#Text"
                        >âContent Format for Textâ</link> of <xref linkend="refZ39862005"/>. As
                    such, text content files compliant under ANSI/NISO Z39.86-2005 will not be
                    compliant under <!--ANSI/-->NISO Z39.98-2012 and vice versa.</para>
            </section>

            <section xml:id="relationshipsXML">
                <title>XML</title>
                <para>The document types defined by <!--ANSI/-->NISO Z39.98-2012 inherit all
                    constraints defined by Extensible Markup Language (XML) 1.0 (Fifth Edition)
                        <xref linkend="refXML"/>.</para>
            </section>

            <section xml:id="relationshipsUnicode">
                <title>Unicode</title>
                <para>This specification inherits its relation to Unicode from <xref
                        linkend="refXML"/>.</para>
            </section>
        </section>
        
        <xi:include href="./xinc/conformanceexpressions.xml" parse="xml"/>
    </chapter>
    
    <chapter xml:id="references">
        <title>Normative References</title>
        
        <para>The following standards contain provisions which, through reference in this text, constitute 
            provisions of this Standard. At the time of publication, the editions indicated were valid. 
            All standards are subject to revision, and parties to agreements based on this Standard are 
            encouraged to investigate the possibility of applying the most recent editions of the standards 
            indicated below.</para>
        
        <bibliography>
            <!-- note when adding "et al." to the end of a personname field, omit the terminating period; one is auto-generated after -->
            <bibliodiv>
                <title/>
                <biblioentry xml:id="refDC">
                    <abbrev>DCMES</abbrev>
                    <title>ANSI/NISO Z39.85-2007: The Dublin Core Metadata Element Set</title>
                    <date>11 October 2010</date>
                    <bibliosource><link xlink:href="http://www.niso.org/apps/group_public/project/details.php?project_id=57">http://www.niso.org/apps/group_public/project/details.php?project_id=57</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refSchematron">
                    <abbrev>ISOSchematron</abbrev>
                    <title>ISO/IEC 19757-3: Rule-based validation â Schematron</title>
                    <bibliosource><link xlink:href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c040833_ISO_IEC_19757-3_2006(E).zip">http://standards.iso.org/ittf/PubliclyAvailableStandards/c040833_ISO_IEC_19757-3_2006(E).zip</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refITS">
                    <abbrev>ITS</abbrev>
                    <title>Internationalization Tag Set (ITS) Version 1.0</title>
                    <editor>
                        <personname>C. Lieske, et al</personname>
                    </editor>
                    <date>3 April 2007</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/2007/REC-its-20070403/">http://www.w3.org/TR/2007/REC-its-20070403/</link></bibliosource>
                </biblioentry>
                <!-- <biblioentry xml:id="refMODS">
                <abbrev>MODS</abbrev>
                <title>
                    <link xlink:href="http://www.loc.gov/standards/mods/">Metadata Object
                        Description Schema (MODS)</link>
                </title>
            </biblioentry> -->
                <biblioentry xml:id="refNVDL">
                    <abbrev>NVDL</abbrev>
                    <title>ISO/IEC 19757-4: NVDL (Namespace-based Validation Dispatching Language)</title>
                    <date>2006-06-01</date>
                    <bibliosource><link xlink:href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c038615_ISO_IEC_19757-4_2006(E).zip">http://standards.iso.org/ittf/PubliclyAvailableStandards/c038615_ISO_IEC_19757-4_2006(E).zip</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refOCF">
                    <abbrev>OCF</abbrev>
                    <title>EPUB Open Container Format (OCF) 2.0.1 </title>
                    <date>4 September 2010</date>
                    <orgname>IDPF (International Digital Publishing Forum)</orgname>
                    <bibliosource><link xlink:href="http://idpf.org/epub/20/spec/OCF_2.0.1_draft.doc">http://idpf.org/epub/20/spec/OCF_2.0.1_draft.doc</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refRDFa11">
                    <abbrev>RDFa</abbrev>
                    <title>W3C Working Draft: RDFa Core 1.1</title>
                    <editor>
                        <personname>B. Adida, et al</personname>
                    </editor>
                    <date>15 December 2012</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/2011/WD-rdfa-core-20111215/">http://www.w3.org/TR/2011/WD-rdfa-core-20111215/</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refXHTMLRDFa">
                    <abbrev>XHTML+RDFa</abbrev>
                    <title>W3C Working Draft: XHTML+RDFa 1.1: Support for RDFa via XHTML Modularization</title>
                    <editor>
                        <personname>S. McCarron, et al</personname>
                    </editor>
                    <date>15 December 2012</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/2011/WD-xhtml-rdfa-20111215/">http://www.w3.org/TR/2011/WD-xhtml-rdfa-20111215/</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refRelaxNG">
                    <abbrev>RelaxNG</abbrev>
                    <title>ISO/IEC 19757-2: Regular-grammar-based validation â RELAX NG</title>
                    <date>2008-12-10</date>
                    <bibliosource><link xlink:href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c052348_ISO_IEC_19757-2_2008(E).zip">http://standards.iso.org/ittf/PubliclyAvailableStandards/c052348_ISO_IEC_19757-2_2008(E).zip</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refRFC1738">
                    <abbrev>RFC1738</abbrev>
                    <title>RFC 1738: Uniform Resource Locators (URL)</title>
                    <author>
                        <personname>Berners-Lee, et al</personname>
                    </author>
                    <date>December 1994</date>
                    <orgname>IETF (Internet Engineering Task Force)</orgname>
                    <bibliosource><link xlink:href="http://www.ietf.org/rfc/rfc1738.txt">http://www.ietf.org/rfc/rfc1738.txt</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refRFC2046">
                    <abbrev>RFC2046</abbrev>
                    <title>RFC 2046: Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</title>
                    <author>
                        <personname>N. Freed, N. Borenstein</personname>
                    </author>
                    <date>November 1996</date>
                    <orgname>IETF (Internet Engineering Task Force)</orgname>
                    <bibliosource><link xlink:href="http://www.ietf.org/rfc/rfc2046.txt">http://www.ietf.org/rfc/rfc2046.txt</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refRFC2119">
                    <abbrev>RFC2119</abbrev>
                    <title>RFC 2119: Key words for use in RFCs to Indicate Requirement Levels</title>
                    <date>March 1997</date>
                    <orgname>IETF (Internet Engineering Task Force)</orgname>
                    <bibliosource><link xlink:href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refRFC3023">
                    <abbrev>RFC3023</abbrev>
                    <title>RFC 3023: XML Media Types</title>
                    <author>
                        <personname>M. Murata, S. St.Laurent and D. Kohn</personname>
                    </author>
                    <date>January 2001</date>
                    <orgname>IETF (Internet Engineering Task Force)</orgname>
                    <bibliosource><link xlink:href="http://www.ietf.org/rfc/rfc3023.txt">http://www.ietf.org/rfc/rfc3023.txt</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refRFC3986">
                    <abbrev>RFC3986</abbrev>
                    <title>RFC3986: Uniform Resource Identifier (URI): Generic Syntax</title>
                    <author>
                        <personname>Berners-Lee, et al</personname>
                    </author>
                    <date>January 2005</date>
                    <orgname>IETF (Internet Engineering Task Force)</orgname>
                    <bibliosource><link xlink:href="http://www.ietf.org/rfc/rfc3986.txt">http://www.ietf.org/rfc/rfc3986.txt</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refXInclude">
                    <abbrev>XInclude</abbrev>
                    <title>XML Inclusions (XInclude) Version 1.0 (Second Edition)</title>
                    <author>
                        <personname>J. Marsh, et al</personname>
                    </author>
                    <date>15 November 2006</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/xinclude/">http://www.w3.org/TR/xinclude/</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refXML">
                    <abbrev>XML</abbrev>
                    <title>Extensible Markup Language (XML) 1.0 (Fifth Edition)</title>
                    <author>
                        <personname>T. Bray, et al</personname>
                    </author>
                    <date>26 November 2008</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/2008/REC-xml-20081126/">http://www.w3.org/TR/2008/REC-xml-20081126/</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refXMLBase">
                    <abbrev>XMLBase</abbrev>
                    <title>XML Base (Second Edition)</title>
                    <date>28 January 2009</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/2009/REC-xmlbase-20090128/">http://www.w3.org/TR/2009/REC-xmlbase-20090128/</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refXMLID">
                    <abbrev>XMLID</abbrev>
                    <title>xml:id Version 1.0</title>
                    <date>9 September 2005</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/2005/REC-xml-id-20050909/">http://www.w3.org/TR/2005/REC-xml-id-20050909/</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refXMLInfoset">
                    <abbrev>XMLInfoset</abbrev>
                    <title>XML Information Set (Second Edition)</title>
                    <author>
                        <personname>J. Cowan, et al</personname>
                    </author>
                    <date>4 February 2004</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/2004/REC-xml-infoset-20040204/">http://www.w3.org/TR/2004/REC-xml-infoset-20040204/</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refXMLNamespaces">
                    <abbrev>XMLNAMES</abbrev>
                    <title>Namespaces in XML 1.0(Third Edition)</title>
                    <date>8 December 2009</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/2009/REC-xml-names-20091208/">http://www.w3.org/TR/2009/REC-xml-names-20091208/</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refXMLSchemaPart1">
                    <abbrev>XML Schema Part1</abbrev>
                    <title>XML Schema Part 1: Structures Second Edition</title>
                    <author>
                        <personname>Henry S. Thompson et al</personname>
                    </author>
                    <date>28 October 2004</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/">http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refXMLSchemaPart2">
                    <abbrev>XML Schema Part2</abbrev>
                    <title>XML Schema Part 2: Datatypes Second Edition</title>
                    <author>
                        <personname>Paul V. Biron et al</personname>
                    </author>
                    <date>28 October 2004</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/">http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/</link></bibliosource>
                </biblioentry>
                <biblioentry xml:id="refXMLStylesheet">
                    <abbrev>XMLSTYLE</abbrev>
                    <title>Associating Style Sheets with XML documents 1.0 (Second Edition)</title>
                    <author>
                        <personname>James Clark, et al</personname>
                    </author>
                    <date>28 October 2010</date>
                    <orgname>W3C (World Wide Web Consortium)</orgname>
                    <bibliosource><link xlink:href="http://www.w3.org/TR/2010/REC-xml-stylesheet-20101028/">http://www.w3.org/TR/2010/REC-xml-stylesheet-20101028/</link></bibliosource>
                </biblioentry>
            </bibliodiv>
        </bibliography>
    </chapter>

    <chapter xml:id="termsAndDefs">
        <title>Terms and Definitions</title>
        <variablelist>
            <varlistentry xml:id="termClass">
                <term>Class</term>
                <listitem>
                    <para> A class represents an abstract means of referring to a set of element
                        and/or attribute declarations associated with a layer or set in the
                        <link linkend="abstractDocumentModel">Abstract Document
                            Model</link>. Classes correspond to name classes in <xref
                                linkend="refRelaxNG"/> and named groups in <xref
                                    linkend="refXMLSchemaPart1"/>. </para>
                    <para>Note: Classes are dynamically populated depending on which modules and
                        components are activated in a profile. Classes do not constitute content
                        model templates, but are collections of declarations that can be used to
                        create concrete content models. </para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termComponent">
                <term>Component</term>
                <listitem>
                    <para> An individual element, attribute, datatype, value or pattern as
                        defined in a module or feature. </para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termCustomization">
                <term>Customization</term>
                <listitem>
                    <para> An element or attribute whose usage context, content model and/or
                        attribute model have been altered from their default state during
                        activation. </para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termFeature">
                <term>Feature</term>
                <listitem>
                    <para>A partial markup model designed to represent a limited,
                        highly-specialized set of content structures. Mathematical equations,
                        chemistry formulas, and musical notations are examples of the kinds of
                        content structures that might be addressed by a Z39.98-AI feature.
                        Â Features share the same general structure as profiles, but are more
                        specialized and of narrower scope and are intended to be used as
                        discrete components within profiles.</para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termImpicitValue">
                <term>Implicit value</term>
                <listitem>
                    <para> The value a processing agent must assume for an attribute when the
                        attribute is not present. Implicit value declarations may apply to all
                        elements that can contain the attribute or only to elements in
                        particular contexts.</para>
                    <para>Note: Each component's definition defines the implicit values a processing
                        agent must apply. </para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termMarkupModel">
                <term>Markup model</term>
                <listitem>
                    <para> The vocabulary and grammar of a profile or feature, as defined by a
                        schema. The markup model encapsulates all the permutations to which
                        valid documents and fragments must conform.</para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termModule">
                <term>Module</term>
                <listitem>
                    <para>An abstract unit within a markup model expressed as a schema fragment,
                        used to consolidate markup declarations to increase the flexibility,
                        modifiability, reuse, and understanding of specific logical or semantic
                        structures.</para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termModuleActivation">
                <term>Module activation</term>
                <listitem>
                    <para> The act of including a module in a profile, thereby including all or
                        some of its components in the markup model. Activation may include
                        making alterations to the traits of the module components, as well as
                        excluding components entirely. </para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termModuleComponentDefinition">
                <term>Module/Component definition</term>
                <listitem>
                    <para> A human readable set of statements describing the default state and
                        nature of a module and/or its components prior to activation, using a
                        mixture of prose, RelaxNG Compact syntax <xref linkend="refRelaxNG"/>
                        and other means. </para>
                    <para>Note: The module and component definitions must not be relied on to provide
                        information about the practical implementation of that module or
                        component as employed in any Z39.98-AI profile. </para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termPA">
                <term>Processing agent</term>
                <listitem>
                    <para>An application that processes a Z39.98-AI document. Examples include,
                        but are not limited to, authoring tools (XML editors, XML-enabled word
                        processors), transformation pipelines, business transfer chains and
                        conformance validators.</para>
                    <para>Note: The domain of processing agents defined by this specification only
                        encompasses the lifecycle of a Z39.98-AI document's creation,
                        transformation and provision. End user tools that render the content of
                        a document, whether the Z39.98-AI document source or the outputs
                        generated from it, do not fall under the scope or conformance
                        requirements outlined in this specification. </para>
                    <para>Note: This definition does not include <link
                        xlink:href="http://www.w3.org/TR/REC-xml/#dt-xml-proc">XML
                        Processor</link> as defined in <xref linkend="refXML"/>.</para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termProfile">
                <term>Profile</term>
                <listitem>
                    <para> A markup model, associated RDF vocabulary, and normative prose
                        describing their usage, designed as an integrated approach to represent
                        information resources of a particular type in XML.</para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termRDFVocab">
                <term>RDF vocabulary</term>
                <listitem>
                    <para>A vocabulary of terms that provides a mechanism to annotate elements
                        or element content with machine-extractable semantic information about
                        their nature or purpose.</para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termRD">
                <term>Resource directory</term>
                <listitem>
                    <para>A package of information regarding a profile or feature, including
                        normative schemas, informative schemas, RDF vocabularies, documentation,
                        style sheets, or other associated resources. Resource directories are
                        expressed in XHTML+RDFa (as defined in <xref linkend="refXHTMLRDFa"
                        />).</para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termSpecialization">
                <term>Specialization</term>
                <listitem>
                    <para> An element or attribute that inherits some or all of it traits from
                        another element, but that serves a more specific semantic purpose. </para>
                    <para>Note: Elements contributed to a layer in the <link
                        linkend="abstractDocumentModel">Abstract Document Model</link>
                        typically inherit a set of basic traits from that layer's default
                        member, and are thus specializations of the default member.
                        Specializations may be derived from any member of a layer, in which case
                        the default member's traits are only indirectly inherited. </para>
                    <para>Note: Unlike variants, specializations do not share the same <link
                        linkend="refXMLNamespaces">QName</link> with the element they
                        inherit their traits from. </para>
                </listitem>
            </varlistentry>
            <!--                <varlistentry>
                    <term>Trait</term>
                    <listitem>
                        <para> A single aspect of the overall nature of a component, such as the
                            semantic definition or the initial content model. Refer to <xref
                                linkend="modulesComponentTraits"/> for more information. </para>
                    </listitem>
                </varlistentry>
-->
            <varlistentry xml:id="termVariant">
                <term>Variant</term>
                <listitem>
                    <para> An element that derives its semantic definition from another element
                        but that is intended for use in a different layer of the <link
                            linkend="abstractDocumentModel">Abstract Document Model</link> than
                        the element it is derived from. </para>
                    <para>Note: A variant shares the same <link linkend="refXMLNamespaces"
                        >QName</link> as the element it is derived from. </para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termZAIDocument">
                <term>Z39.98-AI document</term>
                <listitem>
                    <para>An XML document that conforms to a Z39.98-AI profile.</para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="termZAIDocumentSet">
                <term>Z39.98-AI document set</term>
                <listitem>
                    <para> A Z39.98-AI document together with any local and remote resources
                        referenced by it. </para>
                    <para>Note: Local resources are defined as those that are referenced in a
                        Z39.98-AI document by a file URI scheme <xref linkend="refRFC1738"/> and
                        must accompany the document in order to create a valid representation of
                        it, while remote resources do not directly accompany the document but
                        can be obtained according to their URI schemes. </para>
                </listitem>
            </varlistentry>
        </variablelist>

    </chapter>

    <chapter xml:id="abstractDocumentModel">
        <title>Abstract Document Model</title>

        <section xml:id="abstractDocumentModel_intro">
            <title>Introduction</title>

            <para>The Abstract Document Model underpins the Z39.98-AI specification, providing the
                base structure through which all document profiles are defined. It is both a concept
                for defining the structure of documents and a model for creating valid Z39.98-AI
                profiles: the central concept of the model being that documents can be decomposed to
                a common foundation and that functionality can be built up in distinct layers. </para>

            <para> Four such layers of increasing structural markup granularity are defined to cover
                the major components of a document: a general section layer for the hierarchical
                structure, a block layer for container elements, a layer for phrase constructs and
                finally the layer containing the text data of the document. The Abstract Document
                Model does not just define element structure, however; it additionally defines two
                complementary collections of attributes that flow through the element layers (the
                global and metadata attribute collections). It also exposes all of these layers and
                collections for customization and extension, which is where its flexibility for
                representing new document types lies. </para>

            <para><link linkend="fig002">Figure 2</link> provides a visual perspective of how the layers work in a
                bounding box-like fashion. </para>

            <figure xml:id="fig002">
                <title>The document foundation and four layers of the Abstract Document
                    Model</title>
                <mediaobject>
                    <alt> A depiction of the document foundation and four hierarchical layers of the
                        Abstract Document Model as boxes embedded in each other. To the right side of
                        this pyramid of boxes lie the two attribute collections with an arrow pointing
                        into the layers to indicate how they feed into all. </alt>
                    <imageobject>
                        <imagedata fileref="./img/ai-adm.png"/>
                    </imageobject>
                </mediaobject>
            </figure>

            <para> The layers of the Abstract Document Model are also how the model moves from
                abstraction of a document into formalization of the concept: they are more than just
                a way of conceiving of a document, but represent the practical implementation of
                each profile through schema classes. Profile creators must not change the document
                foundation, nor remove layers nor their inherent traits. The ability
                to create new profiles to describe information resources lies in the freedom offered
                within each layer to include elements and attributes to create new markup models. As
                a result, the Abstract Document Model can be used to create schematic definitions
                for documents across a wide spectrum of formats and fields while ensuring a
                predictable core structure. </para>

            <para>The Z39.98-AI specification was built on this model specifically to address the
                problem of extensibility that existed in earlier versions of the standard. No single
                schema can encompass all document types and provide all the structure and
                flexibility necessary to generate all accessible formats. Although extension points
                were introduced in previous versions to try and address this problem, they only
                allowed authors fixed entry points into a fixed model; the ability to fully
                recompose a schema to accommodate a new form was lacking.</para>

            <para>The Abstract Document Model instead provides a common framework and over-arching
                set of rules in which profiles can be built without imposing unnecessary production
                and semantic restrictions. With the ability to insert new components at each layer,
                and at the same time leverage the components available in the <link
                    linkend="coreModules">core modules</link> and from external features, the
                Z39.98-AI specification unshackles production from the monolithic approach of
                pre-defined and rigid markup models.</para>
        </section>

        <section xml:id="abstractDocumentModel_fundamentals">
            <title>Fundamentals</title>

            <section xml:id="abstractDocumentModel_docFoundation">
                <title>Document foundation</title>

                <para> At the root of the Abstract Document Model is the document foundation. The
                    foundation, as its name implies, defines the concrete concept of a document and
                    provides the practical containers through which the layers operate to define
                    information resources. </para>

                <para> The document foundation also represents the universal concept of a Z39.98-AI
                    document: as composed of a container for metadata and other informational
                    resources and a container to express the body content of the document. The
                    foundation and this principle are constants across all profile implementations. </para>

                <para> <link linkend="ex001">Example 1</link> shows how the document foundation is practically
                    expressed in XML markup in all conformant profiles. </para>

                <example xml:id="ex001">
                    <title>Document foundation as an XML document</title>
                    <programlisting xml:space="preserve"><?example id='ai-document-foundation'?></programlisting>
                </example>
            </section>

            <section xml:id="abstractDocumentModel_docStructureLayers">
                <title>Document structure layers</title>

                <para>The Abstract Document Model comprises a hierarchy of four layers that define a
                    document's internal structure from its most general sense to its most
                    concrete:</para>

                <itemizedlist>
                    <listitem>
                        <para>the <link linkend="abstractDocumentModel_sectionLayer">Section
                                layer</link> defines the primary structural divisions within
                            documents;</para>
                    </listitem>
                    <listitem>
                        <para>the <link linkend="abstractDocumentModel_blockLayer">Block
                                layer</link> defines the major structural elements that occur within
                            sections of documents;</para>
                    </listitem>
                    <listitem>
                        <para>the <link linkend="abstractDocumentModel_phraseLayer">Phrase
                                layer</link> defines lexical and grammatical constructs; and</para>
                    </listitem>
                    <listitem>
                        <para>the <link linkend="abstractDocumentModel_textLayer">Text layer</link>
                            defines the mixture of character data and character elements at the core
                            of all the bounding layers.</para>
                    </listitem>
                </itemizedlist>

                <para>The four structural layers of the Abstract Document Model are a change from
                    previous versions of the specification in that they formally lay out a set of
                    common features for documents and add granularity to the concept of block and
                    inline elements. The new Section layer abstracts higher-level document structure
                    concepts and the Text layer formally separates character data from the "inline"
                    concept, providing a finer-grained data modeling system in which to design and
                    build profiles.</para>

                <para><link linkend="ex002">Example 2</link> depicts how this hierarchical relationship turns into
                    practical markup. </para>

                <example xml:id="ex002">
                    <title>Document structure layers depicted as XML</title>
                    <programlisting xml:space="preserve">
<![CDATA[
<body>
    <section>
        <block>
            <phrase>text</phrase> text <phrase>text</phrase>.
        </block>
        <block>
            â¦
        </block>
        <section>
            â¦
        </section>
    </section>
</body>
]]>
                    </programlisting>
                </example>

                <para> Moving down through the Abstract Document Model, each layer is structurally
                    subservient to the layers that contain it, meaning layers must not contain elements
                    from a superordinate layer. Using the preceding example to illustrate, it would
                    be invalid for either <code>block</code> element to contain a child
                        <code>section</code> element, as the nature of the Block layer prevents its
                    elements from representing the hierarchical structure of a document. </para>
            </section>

            <section xml:id="abstractDocumentModel_docAttributeCollection">
                <title>Document attribute collection</title>

                <para>The Abstract Document Model also comprises two attribute collections that
                    augment and supplement the information in the <link
                        linkend="abstractDocumentModel_docStructureLayers">document structure
                        layers</link>:</para>

                <itemizedlist>
                    <listitem>
                        <para>the <link linkend="abstractDocumentModel_metaAttributesCollection"
                                >Metadata Attributes collection</link> defines a set of attributes
                            for describing information about documents and inflecting structures
                            with semantic meaning.</para>
                    </listitem>
                    <listitem>
                        <para>the <link linkend="abstractDocumentModel_globalAttributesCollection"
                                >Global Attributes collection</link> defines a set of common
                            attributes that are available to all elements in a document.</para>
                    </listitem>
                </itemizedlist>

                <para>These collections are not bound or constrained by the structural layers, but
                    make their attributes available across all elements (individual layers and
                    elements may introduce restrictions and requirements on their use,
                    however).</para>

                <para> The Metadata Attributes collection provides the ability to attach metadata
                    directly to any element in a document (for example, to distinguish the role of
                    generalized elements). These attributes may be used both on elements in the body
                    and to supplement metadata elements in the header. </para>

                <example xml:id="ex003">
                    <title>Example of metadata attributes</title>
                    <programlisting xml:space="preserve"><?example id='ai-adm-metadata-attributes'?></programlisting>
                </example>

                <para>The Global Attributes collection similarly provides the ability to append
                    commonly-used attributes across the entire markup model. These attributes
                    typically provide instructions and hints to processing agents, but any attribute
                    may be added if it meets the criteria of universal applicability (attributes in
                    this layer include the specially-defined XML attributes and attributes used for
                    internationalization purposes).</para>

                <example xml:id="ex004">
                    <title>Example of global attributes</title>
                    <programlisting xml:space="preserve"><?example id='ai-adm-global-attributes'?></programlisting>
                </example>
            </section>

            <section xml:id="abstractDocumentModel_constraints">
                <title>Constraints</title>

                <para>The Abstract Document Model's concept of hierarchical layer containment forms
                    the basis for the following set of constraints when creating new Z39.98-AI
                    profiles:</para>

                <orderedlist>
                    <listitem>
                        <para><emphasis>The <code>document</code> element must not be redefined.</emphasis> 
                            Allowing the nature of the element to be
                            changed would make the concept of a document a moving target.</para>
                    </listitem>
                    <listitem>
                        <para><emphasis>All elements added by modules and features must conform to
                                the content definition of an existing layer.</emphasis>
                            The Abstract Document Model must not be ignored and elements created that
                            invalidate it. Not all elements must be added to a layer's class, but
                            each must conform to the definition of content for a layer as expressed
                            in the following constraint. Layers also must not be changed or added, 
                            as such changes would make the model unstable and unpredictable. </para>
                    </listitem>
                    <listitem>
                        <para><emphasis>Every element's nature must match the definition of content
                                for its containing layer.</emphasis> This rule ensures the
                            hierarchical principle of the Abstract Document Model is respected by
                            preventing the creation of elements in incorrect contexts (e.g., a quote
                            element could not be created in the Section layer as a quote does not
                            represent a structural division of a document). Refer to each layer's
                            definition for more information about its nature.</para>
                    </listitem>
                    <listitem>
                        <para><emphasis>Every element's content model must be consistent with nature
                                of the layer it belongs to.</emphasis> This rule requires that
                            elements from superordinate layers not be allowed as content of
                            subordinate elements, which would represent an obvious breach of the
                            hierarchical nesting principle. A Phrase-layer element, for example,
                            must only reference other Phrase or Text elements. If a layer does not
                            contain a definition for a needed element, a new variant should be
                            created (so long as it is consistent with that layer, as per the
                            previous constraint). </para>
                    </listitem>
                    <listitem>
                        <para><emphasis>Default members must not be removed.</emphasis> Each layer
                            defines at least one default member, which is typically a semantically
                            neutral element that embodies the nature of the layer in the Abstract
                            Document Model (i.e., from which all other elements inherit their base
                            nature). In some cases, a specialization may replace the
                            default member (for example, a newspaper profile could replace the
                                <code>section</code> element with an <code>article</code> element as
                            the default member of the Section layer). Refer to the specialization
                            rules in each layer's implementation section and in the component
                            definition for each default member for more information.</para>
                        <para>Although the default member must not be removed, it is not a requirement
                            that all layers be utilized when building content models. A Block-layer
                            element, for example, could allow only other Block elements as children,
                            only Phrase elements or only Text-layer character data and elements.
                            Similarly, the element could allow a mix of content from any and all of
                            those three layers.</para>
                        <para>Note: This constraint also applies to the attribute sets, even though
                            attributes do not inherit from their default members. </para>
                    </listitem>
                </orderedlist>

            </section>

            <section xml:id="abstractDocumentModel_classes">
                <title>Classes</title>

                <para>Each layer in the Abstract Document Model defines a class that represents the
                    practical implementation of its abstract concepts. In schema terminology,
                    classes are the equivalent of name classes <xref linkend="refRelaxNG"/> and
                    named groups <xref linkend="refXMLSchemaPart1"/> and allow the grouping of
                    elements and attributes into complete and partial content models. </para>

                <para>Elements and attributes added to a class during module activation
                    automatically become available to all other elements that reference that class
                    in their content model. Classes consequently can be viewed as aggregators and
                    containers of a layer's traits (but do not define traits).</para>

                <para> New subclasses may be created to define element and attribute models
                    so long as the new subclasses are consistent with the content rules
                    for their parent layer or collection. All new subclasses must be prefixed by
                    their primary class name using dot notation (for example, a restricted set of
                    Block layer elements for use including prefatory material could be named
                        <code>Block.Intro</code>). </para>
            </section>

        </section>
        
        <section xml:id="abstractDocumentModel_admDefs">
            <title>Layer and Collection Definitions</title>
            
            <section xml:id="abstractDocumentMode_admDefsIntro">
                <title>Introduction</title>
                
                <para>The following sections detail the nature and function of each component of the
                    Abstract Document Model, and introduce the rules and constraints inherent to them
                    and that apply when adding new elements and attributes.</para>
                
                <para>When creating a Z39.98-AI feature, the structures available for use in a host
                    grammar must comply with the membership constraints of the layer or set to which the
                    structures are contributed.</para>
                
                <note>
                    <para> All classes introduced in the following definitions are defined in the <link
                        xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.global-classes.module"
                        >global-classes module definition</link>. </para>
                </note>
            </section>
            
            <section xml:id="abstractDocumentModel_documentFoundation">
                <title>Document foundation</title>
                
                <para>The root element for all Z39.98-AI documents is the <code>document</code>
                    element, which must contain the following two children:</para>
                
                <itemizedlist>
                    <listitem>
                        <para>the <link
                            xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.head">
                            <code>head</code></link> element â the child container for document
                            information; and</para>
                    </listitem>
                    <listitem>
                        <para>the <link
                            xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.body">
                            <code>body</code></link> element â the child container for document
                            content.</para>
                    </listitem>
                </itemizedlist>
                
                <para> This structure must not be altered by profile creators, although attributes may
                    be added to these three elements. Profile creators may modify and/or extend each
                    of the child containers. (Refer to the <link
                        xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.document"
                        >component definition</link> for the <code>document</code> element for
                    complete information.) </para>
                
                <!--
                    <example>
                    <title>Document foundation</title>
                    <programlisting xml:space="preserve"><?example id='ai-document-foundation'?></programlisting>
                    </example>
                -->
                
                <para> When modifying the information container, profile creators must ensure that
                    it does not allow content that must be rendered by processing agents as document
                    content. The information container should contain only metadata describing the
                    document and informational matter that expands on, or describes, body content
                    (e.g., definitions of terms, expansion of abbreviations, etc.). </para>
                
                <para> All profiles must allow multiple instances of the <link
                    xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.meta"
                    ><code>meta</code></link> element in the information container in order
                    to identify the profile a document conforms to (see <xref
                        linkend="documentsReferencingProfilesFeatures"/>) and to allow expression of
                    required metadata (see <xref linkend="documentsMetadataRequired"/>). </para>
                
                <!--
                    <example>
                    <title>Metadata in the information container</title>
                    <programlisting xml:space="preserve"><?example id='ai-information-container'?></programlisting>
                    </example>
                -->
                
                <para> As the document content container will typically be structured into parts,
                    chapters and sections, its default nature is to allow members of the <link
                        linkend="abstractDocumentModel_sectionLayer">Section layer</link>. The
                    <code>body</code> element may be treated as a specialization of the <link
                        xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.section"
                        ><code>section</code></link> element for cases where it will provide the
                    only structure (i.e., contain only Block-layer content). </para>
                
            </section>
            
            <section xml:id="abstractDocumentModel_sectionLayer">
                <title>Section layer</title>
                
                <section xml:id="abstractDocumentModel_sectionLayerDescription">
                    <title>Description</title>
                    
                    <para>The Section layer defines structurally-significant document
                        divisions.</para>
                    
                    <para>Structural significance is defined as the high-level grouping of content
                        according to industry-accepted conventions for divisions, such as defined in
                        the Chicago Manual of Style <xref linkend="refCMOS"/>, and by grouping
                        according to sequentially-related or subordinate headings (real and
                        implied).</para>
                    
                    <para>Examples include: front, body and back matter divisions, covers and other
                        document bindings and containers, and major document divisions such as
                        sections, parts, and chapters.</para>
                    
                </section>
                
                <section xml:id="abstractDocumentModel_sectionLayerImplementation">
                    <title>Implementation</title>
                    
                    <para> Elements contributed to this layer are collectively referenced in a
                        profile's <code>Section</code> class. The default member is the
                        <code>section</code> element, whose <link
                            xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.section"
                            >component definition</link> specifies the traits that all elements
                        contributed to the layer must inherit. The <code>section</code> element can
                        be replaced by a specialization so long as the specialization exhibits the
                        same traits laid out in the component definition. </para>
                    
                    <para> The <code>Section</code> class may be extended to include other elements,
                        but these must adhere to the following rules: </para>
                    
                    <orderedlist>
                        <listitem>
                            <para>They must not allow more than one occurrence of a structural
                                heading in their content models. If an element contains headings
                                that are not significant to the overall structure of the document,
                                another distinct non-structural heading type must be used.</para>
                        </listitem>
                        <listitem>
                            <para>They must either contain exclusively Block or Section layer
                                content or a mixture of the two. Phrase and Text layer content must not
                                be allowed as direct descendants.</para>
                        </listitem>
                    </orderedlist>
                    
                </section>
            </section>
            
            <section xml:id="abstractDocumentModel_blockLayer">
                <title>Block layer</title>
                
                <section xml:id="abstractDocumentModel_blockLayerDescription">
                    <title>Description</title>
                    
                    <para>The Block layer contains structures and divisions that complement, and are
                        subordinate to, the structurally significant divisions of the Section
                        layer.</para>
                    
                    <para>Block content differs from Section content in that it typically
                        encapsulates information for a very specific component of a document or
                        groups content for semantic or formatting reasons only. Block content
                        likewise differs from Phrase content in that it establishes a connection
                        between content ordered and divided vertically on a rendered page.</para>
                    
                    <para>Examples include: headings, tables, lists, figures, quotes, and
                        paragraphs.</para>
                </section>
                
                <section xml:id="abstractDocumentModel_blockLayerImplementation">
                    <title>Implementation</title>
                    
                    <para> Elements contributed to this layer are collectively referenced in a
                        profile's <code>Block</code> class. The default member is the
                        <code>block</code> element, whose <link
                            xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.block"
                            >component definition</link> specifies the traits that all elements
                        contributed to the layer must inherit. The <code>block</code> element may be
                        be replaced by a specialization so long as the specialization exhibits the
                        same traits laid out in the component definition. </para>
                    
                    <para> The <code>Block</code> class may be extended to include other elements,
                        but these must adhere to the following rules: </para>
                    
                    <orderedlist>
                        <listitem>
                            <para> They must not allow structural headings within their content
                                models. Structural headings are reserved for use in Section layer
                                elements. </para>
                        </listitem>
                        <listitem>
                            <para>They must either contain exclusively Text, Phrase or Block layer
                                content or a mixture of the three.</para>
                        </listitem>
                    </orderedlist>
                </section>
            </section>
            
            <section xml:id="abstractDocumentModel_phraseLayer">
                <title>Phrase layer</title>
                
                <section xml:id="abstractDocumentModel_phraseLayerDecscription">
                    <title>Description</title>
                    
                    <para>The Phrase layer contains grammatical and other semantically significant
                        segments that form the content of documents.</para>
                    
                    <para>Phrase content differs from Block content in that it establishes a
                        connection between content that flows horizontally across a rendered page.
                        It also differs from Text content in that it does not define character data
                        but operates at a grammatical and lexical level.</para>
                    
                    <para>Examples include: sentences, terms, and words.</para>
                </section>
                
                <section xml:id="abstractDocumentModel_phraseLayerImplementation">
                    <title>Implementation</title>
                    
                    <para> Elements contributed to this layer are collectively referenced in a
                        profile's <code>Phrase</code> class. The default member is the
                        <code>span</code> element, whose <link
                            xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.span"
                            >component definition</link> specifies the traits that all elements
                        contributed to the layer must inherit. The <code>span</code> element may be
                        be replaced by a specialization so long as the specialization exhibits the
                        same traits laid out in the component definition. </para>
                    
                    <para> The <code>Phrase</code> class may be extended to include other elements,
                        but these must either contain exclusively Text or Phrase layer content or a
                        mixture of the two.</para>
                    
                </section>
            </section>
            
            <section xml:id="abstractDocumentModel_textLayer">
                <title>Text layer</title>
                
                <section xml:id="abstractDocumentModel_textLayerDescription">
                    <title>Description</title>
                    
                    <para> Although the Text layer's primary role is to define character data, it
                        may also be extended to include elements to supplement and augment the
                        available set of characters. </para>
                    
                    <para>Text layer content differs from Phrase content in that it only represents
                        character data and formatting, and does not infer any semantic information
                        about itself.</para>
                    
                    <para>Examples include: emphasis, superscripts, and subscripts.</para>
                </section>
                
                <section xml:id="abstractDocumentModel_textLayerImplementation">
                    <title>Implementation</title>
                    
                    <para> Elements contributed to this layer are collectively referenced in a
                        profile's <code>Text</code> class. The Text layer is unique in that it does
                        not define an element as having default membership but instead designates
                        character data as its default member (as defined in the Characters section
                        in <xref linkend="refXML"/>). </para>
                    
                    <para> All elements that incorporate character data in their content models
                        should do so either by directly referencing the <code>Text</code> class or
                        by indirectly referencing it through their layer's class definition (if the
                        layer incorporates character data). Custom character data declarations may be
                        used where required. </para>
                    
                    <para>The Abstract Document Model imposes no further restrictions on the allowed
                        character content than is already defined by the Characters definition <xref
                            linkend="refXML"/>. Individual profiles and features may express
                        additional restrictions on character content, but only within the scope of
                        the elements and attributes that they define.</para>
                    
                    <para> The <code>Text</code> class may be extended to allow expressions that are
                        not supported by Unicode or that must be handled specially by processing
                        agents (for example, for braille rendering). All extensions must allow only
                        character data and other Text layer elements (refer to the <link
                            xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.char"
                            ><code>char</code></link> element for an example).</para>
                    
                </section>
            </section>
            
            <section xml:id="abstractDocumentModel_metaAttributesCollection">
                <title>Metadata Attributes collection</title>
                
                <section xml:id="abstractDocumentModel_metaAttributesSetDescription">
                    <title>Description</title>
                    
                    <para>The Metadata Attributes collection provides the means to annotate
                        documents and structures with meta information relating to their nature or
                        semantics.</para>
                    
                </section>
                
                <section xml:id="abstractDocumentModel_metaAttributesCollectionImplementation">
                    <title>Implementation</title>
                    
                    <para> Attributes contributed to this layer are collectively referenced in a
                        profile's <code>Meta</code> class. This class has two default members: </para>
                    
                    <itemizedlist>
                        <listitem>
                            <para>the <link
                                xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#rdfa-attrib.module"
                                >RDFa attribute set</link>; and</para>
                        </listitem>
                        <listitem>
                            <para>the <link
                                xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.role-attrib.module"
                                >role</link> attribute.</para>
                        </listitem>
                    </itemizedlist>
                    
                    <para>The RDFa attributes may be used throughout documents to append
                        machine-readable RDF metadata to elements, while the <code>role</code>
                        attribute may be used to layer specific semantic information about the
                        nature of an element.</para>
                    
                    <para> The <code>Meta</code> class may be extended to include other attributes,
                        but these must adhere to the following rules: </para>
                    
                    <orderedlist>
                        <listitem>
                            <para>They must only attach or inflect meta information.</para>
                        </listitem>
                        <listitem>
                            <para>They must not be used in contexts where their contents may be
                                interpreted as document content.</para>
                        </listitem>
                    </orderedlist>
                    
                    <!-- mg: moved to features <para>Features should allow the Metadata Attributes set on the elements they
                        contribute. Any deviations from this recommendation must be explicitly
                        expressed in the feature's resource directory.</para> -->
                    
                    <para>For more information on the use of metadata in Z39.98-AI documents refer
                        to <xref linkend="documentsMetadata"/>.</para>
                    
                </section>
            </section>
            
            <section xml:id="abstractDocumentModel_globalAttributesCollection">
                <title>Global Attributes collection</title>
                
                <section xml:id="abstractDocumentModel_globalAttributeCollectionDescription">
                    <title>Description</title>
                    
                    <para> The Global Attributes collection makes its member attributes available to
                        all elements in a document. The members of this set do not share a common
                        nature or purpose beyond their global applicability, however. </para>
                </section>
                
                <section xml:id="abstractDocumentModel_globalAttributeImplementation">
                    <title>Implementation</title>
                    
                    <para> Attributes contributed to this layer are collectively referenced in a
                        profile's <code>Global Attributes</code> class. This class has two default
                        members: </para>
                    
                    <itemizedlist>
                        <listitem>
                            <para>the XML special attributes; and</para>
                        </listitem>
                        <listitem>
                            <para>the Internationalization (i18n) attributes.</para>
                        </listitem>
                    </itemizedlist>
                    
                    <para> The <code>Global Attributes</code> class may be extended to include other
                        attributes. There are no restrictions on the types of attributes that may be
                        added to this class, but attributes that serve metadata roles should be
                        added to the <code>Meta</code> class (see <xref
                            linkend="abstractDocumentModel_metaAttributesCollection"/>). </para>
                    
                    <para>All elements added to the Abstract Document Model classes should include
                        the attributes defined in this layer in their attribute models.</para>
                    
                    <!-- mg: moved to features <para> In addition, features should allow the global attributes set on the
                        elements they contribute, but the use of local equivalents where this is
                        contextually necessary to avoid naming collisions and/or redefinition of
                        existing attributes is allowed (for example, to avoid the duplication of
                        ID attributes). Any deviations from this recommendation must be explicitly
                        expressed in the feature's resource directory.</para> -->
                </section>
            </section>
            
        </section>
        
    </chapter>

    <chapter xml:id="modules">
        <title>Modules</title>

        <section xml:id="modulesIntro">
            <title>Introduction</title>

            <para>Modules are the high-level building blocks of Z39.98-AI profiles and together with
                    <link linkend="features">features</link> form the basis through which new markup
                models are created. Modules may be pre-defined (as in the case of the <link
                    linkend="coreModules">core modules</link>), may be composed by profile authors
                to fit specific structural needs or may be made available for public use by interest
                groups.</para>

            <para>Modules, in their practical form, are schema files that define custom components â
                such as elements and attributes â for use in building profiles. The components
                within any module typically share a common nature or serve a common structural
                purpose, allowing the targeted activation of modules for specific uses. This
                approach to module definition enables element and attribute counts to be kept to a
                minimum when composing new grammars.</para>

        </section>

        <section xml:id="modulesDefinitions">
            <title>Module and component definitions</title>

            <para>Module and component definitions are informational resources that define the
                nature of a given module and its components. These definitions provide the default
                state of modules and components prior to activation, as well as high-level
                instruction on their proper use. </para>

            <para> A definition must contain the module name, its dependencies and a description of
                its purpose. Each component defined in the module must also be listed along with
                usage information, as outlined in <xref linkend="modulesComponents"/>. <link
                    linkend="coreModules">Core modules</link> additionally specify whether the
                module is required to be activated in all Z39.98-AI compliant profiles. </para>

            <para> There are no rules on the format and structure of a definition resource. So long
                as complete information about the nature and traits of each module and component is
                made available in human readable form, the requirement to provide a definition has
                been satisfied. </para>

            <para> Definitions must be provided for all module components created specifically for
                use in the Z39.98-AI Framework, and each profile's <link linkend="resourcedirectory"
                    >resource directory</link> must indicate the location of these definitions. Core
                module definitions are available at <link
                    xlink:href="http://www.daisy.org/z3998/2012/auth/cm/"/>. </para>

            <para> Definitions for imported features are recommended but are not a requirement, as
                the official documentation maintained by the authoring body should be referenced
                instead. </para>

            <para> Note that module and component definitions are not a reference to how to mark up
                a document to conform to a specific profile and should never be consulted to resolve
                validation issues. The normative schema available in the profile's resource
                directory is the authoritative reference to creating valid documents. </para>

        </section>

        <section xml:id="modulesComponents">
            <title>Components</title>

            <para>A component is any single element, attribute, datatype, set of values or pattern
                defined in a module file that may be activated and used to build content models.
                Components may be usable individually or may be dependent on parental or child
                relationships also being fulfilled. Some components may also have dependencies on
                components from other modules.</para>

            <para>Each module definition must provide the following usage information for all its
                components: </para>

            <itemizedlist>
                <listitem>
                    <para>a semantic definition;</para>
                </listitem>
                <listitem>
                    <para>a default usage context;</para>
                </listitem>
                <listitem>
                    <para>a default content model;</para>
                </listitem>
                <listitem>
                    <para>a default attribute model;</para>
                </listitem>
                <listitem>
                    <para>a definition of alterability; and</para>
                </listitem>
                <listitem>
                    <para>a definition of optionality.</para>
                </listitem>
            </itemizedlist>



            <section xml:id="modulesComponentTraits_semanticDefinition">
                <title>Semantic definition</title>

                <para>The semantic definition provides a concise statement about the kinds of
                    structures or data the component is meant to represent.</para>

                <para>The semantic statement may be very restrictive about what the component can
                    capture (as in the case of highly-specialized components like tables of
                    contents) or may be very open (as in the case of general containers).</para>

                <para>The semantic definition must always be respected when including and using
                    components in a Z39.98-AI profile; it is not valid to use a component in a way
                    that contradicts its definition.</para>

            </section>

            <section xml:id="modulesComponentTraits_initialUsageContext">
                <title>Default usage context</title>

                <para>The default usage context identifies how the component is initially configured
                    to be used within the Abstract Document Model and/or within other
                    components:</para>

                <itemizedlist>
                    <listitem>
                        <para>if the component references classes in the Abstract Document Model,
                            then the default parent of the element or attribute is any element that
                            allows the referenced class in its content or attribute model,
                            respectively.</para>
                    </listitem>
                    <listitem>
                        <para>if the component has a single element as its parent, then the
                            referenced element is the default parent of the element or
                            attribute.</para>
                    </listitem>
                </itemizedlist>

                <para>Elements and attributes have an alterable usage context unless they are
                    explicitly declared to be fixed. When altering a usage context, elements must
                    not be moved across layer boundaries in the Abstract Document Model.</para>

                <para>The default usage context must be declared using prose and/or expressions in
                        <link linkend="refRelaxNG">RNC</link> syntax in the module's
                    definition.</para>
            </section>


            <section xml:id="modulesComponentTraits_initialContentModel">
                <title>Default content model</title>

                <para>Each element and attribute in a module must declare a default content model or
                    datatype that specifies its allowed content or value(s):</para>

                <itemizedlist>
                    <listitem>
                        <para>in the case of elements, the default content model is a set of
                            references to classes, elements, and/or datatype declarations.</para>
                    </listitem>
                    <listitem>
                        <para>in the case of attributes, a datatype must be specified, which may
                            reference other datatype declarations and/or enumerated literal values
                            to set the initially-allowed value(s).</para>
                    </listitem>
                </itemizedlist>

                <para>Every element or attribute has an alterable content model unless it is
                    explicitly declared to be fixed. Declarations of fixed content models may apply
                    to the content model as a whole, or to individual components of it.</para>

                <para>The default content model must be declared using prose and/or expressions in
                        <link linkend="refRelaxNG">RNC</link> syntax in the module's definition.
                </para>
            </section>


            <section xml:id="modulesComponentTraits_initialAttributeModel">
                <title>Default attribute model</title>

                <para>In addition to their default content model, elements must additionally declare
                    an attribute model that specifies a set of references to the attribute classes
                    and/or individual attribute declarations that constitute its default set of
                    allowed attributes.</para>

                <para>Every element has an alterable attribute model unless it is explicitly
                    declared to be fixed. Declarations of fixed attribute models may apply to the
                    attribute model as a whole, or to individual attributes within it.</para>

                <para>All elements should allow the <link
                        linkend="abstractDocumentModel_globalAttributesCollection">Global Attributes
                        collection</link> by default.</para>

                <para>The default attribute model must be declared using prose and/or expressions in
                        <link linkend="refRelaxNG">RNC</link> syntax in the module's definition.
                </para>
            </section>


            <section xml:id="modulesComponentTraits_alterability">
                <title>Definition of alterability</title>

                <para>Each component's default content model, attribute model and context are open
                    to alteration when its containing module is activated unless the component's
                    definition contains explicit restrictions stating otherwise. The semantic
                    definition and rules of alterability and optionality are fixed and must not be
                    changed.</para>

                <para>Alterations to the default content and attribute models may be made to either
                    restrict or loosen their allowed content/values. Complete rewrites of these
                    initial states may also be permissible.</para>

                <para>The default usage context may likewise be restricted, loosened or rewritten to
                    change the way that the component can be used by other components and within
                    layers of the Abstract Document Model.</para>

                <para>Although alteration of a component's traits is allowed by default, alterations 
                    must not be made that would cause the nature of the element to conflict
                    with its semantic definition.</para>
            </section>


            <section xml:id="modulesComponentTraits_optionality">
                <title>Definition of optionality</title>

                <para>As modules may contain more components than are needed in the Z39.98-AI
                    profile into which they are activated, any of their components may be specified
                    as optional to prevent unnecessary imports.</para>

                <para>A component must not be excluded if another included component requires it as a
                    dependency.</para>

                <para> By default, all components are optional; if a component is mandatory, this
                    must be explicitly stated in the component's definition. </para>
            </section>

        </section>

        <section xml:id="modulesExpression">
            <title>Expression</title>

            <para> A module is formally expressed using one or more normative schemas authored in
                any of the languages specified in <xref linkend="schemas"/>. </para>

        </section>

        <section xml:id="moduleActivation">
            <title>Activation</title>

            <para>Activation of a module is the process of importing it into a Z39.98-AI profile and
                including its components in content models and class definitions The first step in
                the activation process is to import the desired module into a profile driver file.
                If the module lists other modules as dependencies, those modules must also be
                imported, including any of their dependencies. This process of importing module
                dependencies continues until all required modules have been included (note that each
                dependency only needs to be imported once). </para>

            <para>Modules may have both hard dependencies, where failing to import a dependent
                module will result in a schema error, and soft dependencies, where no errors are
                reported. Omitting a soft dependency, while not resulting in an error in the schema
                file, still results in an invalid Z39.98-AI profile. </para>

            <para> The next step in the activation process involves addressing the usage
                requirements for each component in the module, namely: </para>

            <itemizedlist>
                <listitem>
                    <para>whether the component is needed or can be removed if allowed by the
                        component's optionality trait;</para>
                </listitem>
                <listitem>
                    <para>whether the default content model and/or attribute model adequately
                        reflect the needs of the profile being built and customizing the model if
                        alterations are permitted; and</para>
                </listitem>
                <listitem>
                    <para>whether the default usage context is appropriate for the profile being
                        built, and modifying where the component can be used if alterations are
                        permitted. In the case where a component is needed in another layer of the
                        Abstract Document Model, this step would involve creating a new variant.
                    </para>
                </listitem>
            </itemizedlist>

            <para> Module files should not be directly edited to make modifications; any changes
                should be made in the profile driver file where the module is included.
                <link linkend="ex005">Example 5</link> shows how a definition can be overridden when activating a
                module.</para>

            <example xml:id="ex005">
                <title>Modification of a RNG module during activation</title>
                <programlisting xml:space="preserve">
<![CDATA[
<include href="./mod/z3998-document.rng">
  <!-- redefine body content to use partitions -->
  <define name="z3998.body.content">
     <ref name="z3998.partitions"/>
  </define>     
</include>
]]>
                </programlisting>
            </example>

            <para> Altering the components of a module is not required, and in some cases may not be
                permitted. If a module is fixed and not alterable, or if all of its components
                are to be used in their default state, the activation process may end with the
                import of the module.</para>

            <para> The activation process must be carried out for all the required modules, optional
                modules and features needed to fully represent the new Z39.98-AI profile.</para>
        </section>

        <section xml:id="coreModules">
            <title>Core modules</title>

            <para>The core modules were developed to accompany this specification to assist in the
                creation of new profiles. Some of the modules are required to be activated in all
                compliant profiles, as they define the document foundation and other core aspects of
                the Abstract Document Model, while the other optional modules provide a common base
                of components to encourage structural consistency across profiles.</para>

            <para>The modules are grouped so that each contains a single set of semantically and/or
                structurally related elements and attributes. The definition for each module can be
                found in the <link
                    xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#coreModuleDefinitions"
                    ><!--ANSI/-->NISO Z39.98-2012 â Core Modules</link> document that accompanies
                this specification. Profile creators should always check these definitions for
                compatible components before constructing a new module.</para>

            <para> Core modules must not be directly modified to alter their component definitions.
                If module components allow modifications to any of their traits, those modifications
                must be made in the profile driver file during activation. </para>

            <para> Profile creators are advised not to reference the publicly available versions of
                the core modules in their profile driver files, as the public location always
                contains the latest releases. The core modules are subject to change independent of
                this specification, so local copies of the modules should always be referenced to
                ensure the stability of any profile. </para>

            <section xml:id="uriCoreNamespace">
                <title>Core namespace URI</title>

                <para xml:id="coreNamespace" xreflabel="Z39.98-AI Core namespace URI">The Z39.98-AI
                    Core namespace URI is
                    <code>http://www.daisy.org/ns/z3998/authoring/</code>.</para>

                <para>This is the default namespace URI of all elements defined in the core
                    modules.</para>
            </section>

            <section xml:id="uriCoreModules" xreflabel="core modules canonical URI">
                <title>Core modules URI</title>

                <para>The canonical URI of the Z39.98-AI core modules is <link
                        xlink:href="http://www.daisy.org/z3998/2012/auth/cm/"
                        >http://www.daisy.org/z3998/2012/auth/cm/</link>.</para>

                <para>The current definitions for all core modules are available at this URI.</para>
            </section>

        </section>

    </chapter>

    <chapter xml:id="profiles">
        <title>Profiles</title>

        <section xml:id="profilesIntro">
            <title>Introduction</title>

            <para> A profile is the collection of resources that together define the rules and
                requirements for marking up an information resource. Profiles are typically equated
                with XML schemas, but a schema may be only one of a number of resources that define
                the requirements: the prose definition that accompanies each module may outline
                implicit attribute values that must be recognized when an attribute is not present,
                for example, and an RDF vocabulary may define a set of allowed role values for
                adding semantic information to elements. It is also not uncommon that more than one
                schema may define the markup requirements: a RelaxNG schema to express the general
                structure of a document and a Schematron schema to express finer-grained conformance
                logic. </para>

            <para>Where the <link linkend="abstractDocumentModel">Abstract Document Model</link>
                defines Z39.98-AI document structure at a conceptual level and, coupled with the
                    <link linkend="coreModules">core modules</link>, provides a common framework of
                composition rules and abstract building blocks, profiles define the practical markup
                models suitable for describing information resources. Examples of the types of
                resources that can be defined using the Framework include: </para>

            <itemizedlist>
                <listitem>
                    <para>general print books of all kinds (fiction and nonfiction)</para>
                </listitem>
                <listitem>
                    <para>student textbooks and learning materials</para>
                </listitem>
                <listitem>
                    <para>poetry</para>
                </listitem>
                <listitem>
                    <para>plays</para>
                </listitem>
                <listitem>
                    <para>newspapers</para>
                </listitem>
                <listitem>
                    <para>periodicals</para>
                </listitem>
                <listitem>
                    <para>bills and invoices</para>
                </listitem>
                <listitem>
                    <para>catalogs</para>
                </listitem>
                <listitem>
                    <para>consumer medical information</para>
                </listitem>
            </itemizedlist>

            <para> This specification does not place any restrictions on the scope of profiles:
                depending on their intended use, profiles may have a wide scope (such as a general
                book profile) or they may have a narrow scope (such as a consumer medical
                information profile). </para>
        </section>

        <section xml:id="profilesCreation">
            <title>Creation</title>

            <para> The process of creating a profile typically begins with the authoring of a schema
                to represent the desired information resource(s). The Z39.98-AI Framework encourages
                a plug-in model for creating schemas, whereby existing modules and features are
                re-used so that only the specialized requirements of the profile result in new
                elements and attributes. </para>

            <para> A thorough understanding of the requirements of this specification will be
                necessary to successfully create a new schema. Compliance with the <link
                    linkend="abstractDocumentModel">Abstract Document Model</link>, for example,
                requires that all profiles must first include the <link
                    xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.document.module"
                    >document module</link> in their schema driver file (the schema file that will
                be referenced by validators) to establish the root <code>document</code> element.
                The <link
                    xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.global-classes.module"
                    >global-classes module</link> must then be imported to establish the Abstract
                Document Model classes into which all other module and feature components will be
                added. </para>

            <para> This process of dependency and required component inclusion continues until a
                complete markup model is established that conforms to the requirements outlined in
                    <xref linkend="profileConformanceMarkupModel"/> (see also <xref
                    linkend="moduleActivation"/> for more information on the inclusion process). It
                is also during this process that other external resources, such as RDF vocabularies,
                will be identified and incorporated into the profile. </para>

            <para> The next step in creating a profile is to determine whether, in fact, a new
                unique profile has been created. The uniqueness of a profile is not determined
                solely by the modules and features that it includes, however; it is possible for
                many unique profiles to be created using the same core modules. The actual
                distinction between profiles is determined by variations across all of the following
                key factors: </para>

            <itemizedlist>
                <listitem>
                    <para>which modules have been activated;</para>
                </listitem>
                <listitem>
                    <para>the number of alterations made to the components of the activated
                        modules;</para>
                </listitem>
                <listitem>
                    <para>the number of new elements (specializations) introduced;</para>
                </listitem>
                <listitem>
                    <para>which features are defined as supported by the profile;</para>
                </listitem>
                <listitem>
                    <para>the RDF vocabularies supported; and</para>
                </listitem>
                <listitem>
                    <para>the restrictions, requirements, implicit values and other conditions
                        spelled out in any accompanying normative prose.</para>
                </listitem>
            </itemizedlist>

            <para>When the new profile is ready for use, a <link linkend="resourcedirectory"
                    >resource directory</link> must be published at the schema's identity URI (see
                    <xref linkend="profileConformanceIdentityURI"/>). This document identifies the
                schema files, RDF vocabularies, documentation, and other associated resources in a
                manner that allows humans and machines to locate them. </para>

            <para> If a profile is being created to serve only a unique subset of a larger existing
                profile (or to provide a localization), the documentation that accompanies it should
                clearly identify its parent model as well as where it varies to assist processing
                agent developers. </para>

            <para> The Z39.98-AI Working Group developed a set of profiles that conform to
                this specification. References to these profiles can be found in <xref
                    linkend="profileCatalog"/>. While the intent is that this profile catalog will
                be extended over time, the profiles listed in the catalog are not an exclusive set;
                other agencies may create profiles and, if desired, make those available
                independently for public use.</para>
        </section>

        <section xml:id="profileConformance">
            <title>Profile conformance definition</title>

            <section xml:id="profileConformanceIdentityURI">
                <title>Profile identity URI</title>
                <para> Each profile must define an identity URI that serves as its unique
                    identifier.</para>
                <para>An example profile identity URI is:
                        <code>http://www.example.org/z3998/2012/auth/profiles/myProfile/1.0/</code>
                </para>
                <para> The identity URI must resolve to a <link linkend="resourcedirectory">resource
                        directory</link> where the profile is defined. </para>

                <para> The provider of the feature or profile owns the identity URI and must assure
                    that the identity URI has no public access restrictions and is valid with
                    respect to <xref linkend="refRFC3986"/>. </para>

                <para> When comparing two identity URIs for equality, processing agents must follow
                    the rules specified by <xref linkend="refRFC3986"/>. </para>

                <para>For information on how a Profile Identity URI is expressed in Z39.98-AI
                    documents, see <xref linkend="documentsReferencingProfilesFeatures"/>.</para>
            </section>

            <section xml:id="profileConformanceMarkupModel">
                <title>Profile markup model definition</title>

                <para> Each profile must define exactly one markup model, which must meet all of the
                    following criteria:</para>

                <itemizedlist>
                    <listitem xml:id="profileConformanceMarkupModelSchema">
                        <para>The grammatical constraints of the markup model must be expressed
                            formally using at least one schema, identified in the <link
                                linkend="profileConformanceResourceDirectory">profile's resource
                                directory</link> as normative and written in one of the languages
                            identified in <xref linkend="schemas"/>.</para>
                        <para>Grammatical constraints that cannot be expressed using schema syntax
                            must be defined using prose in the designated area of the profile's
                            resource directory.</para>
                    </listitem>
                    <listitem xml:id="profileConformanceMarkupModelADM">
                        <para>The schema identified as normative must adhere to the Abstract
                            Document Model constraints defined in <xref
                                linkend="abstractDocumentModel_constraints"/> and in each
                            Implementation section in <xref
                                linkend="abstractDocumentModel_admDefs"/>.</para>
                    </listitem>
                    <listitem xml:id="profileConformanceMarkupModelFeatures">
                        <para>If the profile supports one or several <link linkend="features"
                                >features</link>, then the profile's normative schema must include
                            the activated normative <link
                                linkend="featureConformanceMarkupModelSchema">schema fragment(s)
                                defined by these features</link>. </para>
                        <para>The activation of a feature's schema fragment must be done without
                            violating the definition of <link
                                linkend="featureConformanceMarkupModelComponents">available
                                components</link> in the feature's resource directory.</para>
                        <para>Profiles must not modify the grammatical constraints expressed by the
                            feature's schema fragment(s) except where allowed by the feature's
                            normative specification.</para>
                    </listitem>
                    <listitem xml:id="profileConformanceMarkupModelMeta">
                        <para> The grammatical constraints of the markup model must allow the
                            expression of required metadata as defined in <xref
                                linkend="documentsMetadataRequired"/>. </para>
                    </listitem>
                    <listitem xml:id="profileConformanceMarkupModelIdentity">
                        <para> The grammatical constraints of the markup model must allow the
                            identification of the profile to which the markup model conforms as well
                            as any features in use, as defined in <xref
                                linkend="documentsReferencingProfilesFeatures"/>. </para>
                    </listitem>
                    <listitem xml:id="profileConformanceMarkupModelRDFaAssoc">
                        <para> The grammatical constraints of the markup model must allow the
                            expression of RDF vocabulary associations defined in <xref
                                linkend="rdfAssociatingVocab"/>. </para>
                    </listitem>

                    <listitem xml:id="profileConformanceMarkupModelNames">
                        <para> All elements included in the profiles markup model must be bound to
                            an <link linkend="refXMLNamespaces">XML namespace</link>. </para>
                    </listitem>

                </itemizedlist>

            </section>

            <section xml:id="profileConformanceResourceDirectory">
                <title>Profile resource directory</title>
                <!-- NOTE: #resourcedirectoryReq should only list general reqs, this section adds the profile specific RD reqs, same for features -->

                <para> The <link linkend="profileConformanceIdentityURI">identity URI</link> must
                    resolve to a <link linkend="resourcedirectory">resource directory</link> that
                    meets all of the general criteria defined in <xref
                        linkend="resourcedirectoryConformance"/>. In addition, the profile's
                    resource directory must meet all of the following criteria:</para>

                <itemizedlist>
                    <listitem>
                        <para>The name and version used to identify the profile in Z39.98-AI
                            documents must be specified using the <link
                                xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#z3998-instance-name"
                                >z3998-instance-name</link> and <link
                                xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#version"
                                >version</link> terms, respectively.</para>
                    </listitem>
                    <listitem>
                        <para>The <link linkend="profileConformanceMarkupModelSchema">normative
                                schema(s)</link> must be identified in the <link
                                xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#normative-schemata"
                                >normative-schemata</link> section.</para>
                        <para>Any additional grammatical restrictions expressed in prose must be
                            identified using the <link
                                xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#normative-prose"
                                >normative-prose</link> term.</para>
                    </listitem>
                    <listitem>
                        <para>The URI of the RDFa <link linkend="rdfAssociatingVocab">initial
                                context document</link> must be identified using the <link
                                xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#z3998-rdfa-context"
                                >z3998-rdfa-context</link> term.</para>
                    </listitem>
                    <listitem>
                        <para>Features supported by the profile must be identified using the <link
                                xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#z3998-feature"
                                >z3998-feature</link> property. (Note that feature version
                            information is available implicitly through the normative schemas of the
                            given version of the profile.)</para>
                    </listitem>
                </itemizedlist>

            </section>

            <section xml:id="profileConformanceRDFaContext">
                <title>RDFa initial context</title>

                <para> The <link linkend="rdfAssociatingVocab">initial context document</link> for
                    each Z39.98-AI profile must meet all of the following criteria: </para>

                <itemizedlist>
                    <listitem>
                        <para> It must be marked up in <link linkend="refXHTMLRDFa">XHTML+RDFa
                                1.1</link> and be valid to the requirements for initial context
                            documents stipulated in section 9 of <xref linkend="refRDFa11"/>.
                        </para>
                    </listitem>
                    <listitem>
                        <para> It must not define more than one default vocabulary using the
                                <code>vocabulary</code> term defined in <xref linkend="refRDFa11"/>.
                        </para>
                    </listitem>
                    <listitem>
                        <para> The profile must reserve the following prefixes for the following
                            URIs: </para>
                        <variablelist>
                            <varlistentry>
                                <term>z3998</term>
                                <listitem>
                                    <para>
                                        <literal>http://www.daisy.org/z3998/2012/vocab/decl/#</literal>
                                    </para>
                                    <para> The <link
                                            xlink:href="http://www.daisy.org/z3998/2012/vocab/decl/#"
                                            >Z39.98-2012 Instance Metadata Vocabulary</link>.
                                    </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>dc</term>
                                <listitem>
                                    <para>
                                        <literal>http://purl.org/dc/elements/1.1/</literal>
                                    </para>
                                    <para> The <link xlink:href="http://purl.org/dc/elements/1.1/"
                                            >Dublin Core Metadata Element Set, Version 1.1</link>.
                                    </para>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </listitem>
                </itemizedlist>

            </section>

        </section>

    </chapter>

    <chapter xml:id="features">
        <title>Features</title>

        <section xml:id="featuresIntro">
            <title>Introduction</title>

            <para>Certain kinds of content structures have highly specialized requirements for
                representation and processing, but have limited scope within information
                resources.Â A typical example is mathematical equations, where there already exists a
                specialized markup to represent them <xref linkend="refMATHML"/>. Z39.98-AI features
                are designed to handle these kinds of structures.</para>

            <para> Features have much in common with profiles: each feature defines a markup model
                and has a unique URI associated with it which serves as its identifier, and which
                resolves to a unique <link linkend="resourcedirectory">resource directory</link>.
                Features are more specialized, however, and narrower in scope: they are not intended
                to be used as complete markup languages on their own. In the Z39.98-AI framework,
                features may be optional add-ons to profiles. </para>

            <para>Features typically only expose a small set of elements and attributes for
                reference within the content models defined by profiles.Â These components are
                defined by the feature in its associated normative prose in order to ensure
                consistency of usage across Z39.98-AI profiles. The predictability of features
                further allows processing agents to support them independently of the profiles that
                might reference them.</para>

            <para>Profiles explicitly declare which (if any) features they support. If a profile
                supports a feature, it becomes a "host" of this feature, and the profile's normative
                schema includes the schema fragment defined by the feature.</para>

        </section>

        <section xml:id="featureConformance">
            <title>Feature conformance definition</title>

            <section xml:id="featureConformanceIdentityURI">
                <title>Feature identity URI</title>
                <para> Each feature must define an identity URI that serves as its unique
                    identifier.</para>
                <para>An example feature identity URI is:
                        <code>http://www.example.org/z3998/2012/auth/features/myFeature/1.0/</code>
                </para>

                <para> The identity URI must resolve to a <link linkend="resourcedirectory">resource
                        directory</link> where the feature is defined. </para>

                <para> The provider of the feature owns the identity URI and must assure that the
                    identity URI has no public access restrictions and is valid with respect to
                        <xref linkend="refRFC3986"/>. </para>

                <para> When comparing two identity URIs for equality, processing agents must follow
                    the rules specified by <xref linkend="refRFC3986"/>. </para>

                <para>For information on how Feature Identity URIs are expressed in Z39.98-AI
                    documents, see <xref linkend="documentsReferencingProfilesFeatures"/>.</para>
            </section>

            <section xml:id="featureConformanceMarkupModel">
                <title>Feature markup model definition</title>

                <para> Each feature's markup model must meet all of the following criteria:</para>

                <itemizedlist>
                    <listitem xml:id="featureConformanceMarkupModelSchema">
                        <para>Its grammatical constraints must be expressed formally using at least
                            one schema or schema fragment, each of which must be written in one of
                            the languages identified in <xref linkend="schemas"/> and be identified
                            in the <link linkend="featureConformanceResourceDirectory">feature's
                                resource directory</link> as normative.</para>
                        <para>Grammatical constraints that cannot be expressed using schema syntax
                            must be defined using prose in the designated area of the feature's
                            resource directory.</para>
                    </listitem>
                    <listitem>
                        <para>It must not include contributions that subset or reduce a host
                            profile's markup model. Features must only extend the host markup
                            model.</para>
                    </listitem>
                    <listitem>
                        <para>All elements it contributes to a host profile's markup model must be
                            bound to an <link linkend="refXMLNamespaces">XML
                            namespace</link>.Â </para>
                        <para>The namespace of elements and attributes defined by a feature must not
                            be the <xref linkend="coreNamespace"/>. Note, however, that a feature
                            may reuse elements in the Z39.98-AI Core namespace in internal content
                            models.</para>
                    </listitem>
                    <listitem>
                        <para>It should allow the <link
                                linkend="abstractDocumentModel_metaAttributesCollection">Metadata
                                Attributes collection</link> on the elements itâ¨ contributes. Any
                            deviations from this recommendation must be explicitlyâ¨ expressed in the
                            feature's resource directory.</para>
                    </listitem>
                    <listitem>
                        <para> It should allow the <link
                                linkend="abstractDocumentModel_globalAttributesCollection">Global
                                Attributes collection</link> on theâ¨ elements it contributes, but
                            the use of local equivalents is allowed where contextually necessary to
                            avoid naming collisions and/or redefinition ofâ¨ existing attributes (for
                            example, to avoid the duplication ofâ¨ ID attributes). Any deviations
                            from this recommendation must be explicitlyâ¨ expressed in the feature's
                            resource directory.</para>
                    </listitem>
                    <listitem xml:id="featureConformanceMarkupModelComponents">
                        <para>It must identify which components are available for use in a host
                            grammar. Only the designated elements, attributes, values, and datatypes
                            may be referenced directly by a profile in its markup model. (See <xref
                                linkend="featureConformanceResourceDirectory"/>.)</para>
                    </listitem>
                </itemizedlist>
            </section>

            <section xml:id="featureConformanceResourceDirectory">
                <title>Feature resource directory</title>
                <!-- NOTE: #resourcedirectoryReq should only list general reqs, this section adds the feature specific RD reqs, same for profiles -->

                <para> The <link linkend="featureConformanceIdentityURI">identity URI</link> must
                    resolve to a <link linkend="resourcedirectory">resource directory</link> that
                    meets all of the general criteria defined in <xref
                        linkend="resourcedirectoryConformance"/>. In addition, the feature's
                    resource directory must meet all of the following criteria:</para>

                <itemizedlist>
                    <listitem>
                        <para>The name and version used to identify the feature in Z39.98-AI
                            documents must be specified using the <link
                                xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#z3998-instance-name"
                                >z3998-instance-name</link> and <link
                                xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#version"
                                >version</link> terms, respectively.</para>
                    </listitem>
                    <listitem>
                        <para>The <link linkend="featureConformanceMarkupModelSchema">normative
                                schema or schema fragments(s)</link> must be identified in the <link
                                xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#normative-schema"
                                >normative-schemata</link> section.</para>
                        <para>Any additional grammatical restrictions expressed in prose must be
                            identified using the <link
                                xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#normative-prose"
                                >normative-prose</link> term.</para>
                    </listitem>
                    <listitem xml:id="featureConformanceResourceDirectoryComponents">
                        <para>The identification of <link
                                linkend="featureConformanceMarkupModelComponents">components</link>
                            available for inclusion in a host profile must be made in normative
                            prose.</para>
                    </listitem>
                    <listitem>
                        <para>If the feature defines processing agent behaviors that modifies the
                            default behavior with regards to <link
                                linkend="processingAgentConformanceInitializationBehavior"
                                >initialization</link>, then those behaviors must be detailed in
                            normative prose. </para>
                    </listitem>
                    <!--                    <listitem>
                        <para>As the ability to <link linkend="rdfAssociatingVocab">declare default
                                RDF vocabularies</link> is reserved for use by profiles, the <link
                                xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#default-vocabulary"
                                >default-vocabulary</link> term must not occur.</para>
                    </listitem> -->
                    <listitem xml:id="featureConformanceMarkupModelAbsDef">
                        <para>The components contributed by the feature should include <link
                                linkend="modulesDefinitions">component definitions</link>.</para>
                    </listitem>
                </itemizedlist>

            </section>

        </section>

    </chapter>

    <chapter xml:id="documents">
        <title>Documents</title>

        <section xml:id="documentsIntro">
            <title>Introduction</title>

            <para> The purpose of authoring Z39.98-AI profiles is ultimately to allow the creation
                of documents that represent information resources. A Z39.98-AI document is a
                well-formed XML document that conforms to all the normative constraints defined by a
                profile and any included features.</para>

            <para> Although Z39.98-AI documents may exist as single XML files that reference no
                additional local or remote resources, a complete Z39.98-AI document set typically
                will include local resources (such as included XML fragments, images, style sheets
                and metadata records), as well as reference remote resources that can be obtained by
                their protocol (web-hosted resources available over HTTP or FTP, for example). To
                simplify the distribution of documents, the Z39.98-AI Framework consequently also
                defines a <link linkend="container">container format specification</link> for the
                bundling of local resources with their associated Z39.98-AI document. </para>

        </section>

        <section xml:id="documentsConformanceDefinition"
            xreflabel="Document
            conformance definition">
            <title>Document conformance definition</title>
            <para>In order to be conformant, a Z39.98-AI document must meet all of the following
                criteria:</para>

            <itemizedlist>
                <listitem>
                    <para>It must be a well-formed XML Document as defined by <xref linkend="refXML"
                        />. </para>
                </listitem>
                <listitem>
                    <para>It must be namespace well-formed as defined by <xref
                            linkend="refXMLNamespaces"/>.</para>
                </listitem>
                <listitem>
                    <para>It must constitute a single XML Infoset as defined in <xref
                            linkend="refXMLInfoset"/>.</para>
                </listitem>
                <listitem>
                    <para>The start tag of the root element of the document must explicitly contain
                        a <xref linkend="refXMLNamespaces"/> compliant declaration for the Z39.98-AI
                        Core namespace, as defined in <xref linkend="coreNamespace"/>. </para>
                </listitem>
                <listitem>
                    <para>It must include a reference to exactly one conforming profile, using the
                        mechanism defined in <xref linkend="documentsReferencingProfilesFeatures"
                        />.</para>
                </listitem>
                <listitem>
                    <para>If it includes markup contributed by any of the features supported by the
                        referenced profile, it must include a reference to those features used and
                        only to those used using the mechanism defined in <xref
                            linkend="documentsReferencingProfilesFeatures"/>.</para>
                </listitem>
                <listitem>
                    <para>It must be valid to the normative schema(s) of the referenced
                        profile.</para>
                </listitem>
                <listitem>
                    <para>It must conform to any normative prose expressed in the resource
                        directories of the referenced profile and feature(s) (see <xref
                            linkend="resourcedirectoryConformance"/>).</para>
                </listitem>
                <listitem>
                    <para>It must contain metadata that meets all the requirements of <xref
                            linkend="documentsMetadataRequired"/>. </para>
                </listitem>
                <listitem>
                    <para>It must perform RDF vocabulary association as defined in <xref
                            linkend="rdfAssociatingVocab"/>.</para>
                </listitem>
                <listitem>
                    <para>If it references CSS Style sheets, then it should do so using the syntax
                        defined in <xref linkend="refXMLStylesheet"/>.</para>
                </listitem>
            </itemizedlist>


        </section>

        <section xml:id="documentsReferencingProfilesFeatures">
            <title>Referencing profiles and features</title>

            <para> Documents must reference the profile to which they adhere via a <link
                    xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.meta">meta</link>
                element in the metadata container element (see <xref
                    linkend="abstractDocumentModel_documentFoundation"/>). The profile's identity
                URI must be given in the <code>resource</code> attribute and the value of the
                    <code>rel</code> attribute must contain the term <code>profile</code> (as
                defined in the <link linkend="rdfPredefinedVocabsDecl">Z39.98-2012 Instance Metadata
                    Vocabulary</link>). The unique name and version number of the profile must also
                be identified using the <code>name</code> and <code>version</code>
                properties.</para>

            <para>Each feature used in the document must also be referenced via a <code>meta</code>
                element in the metadata container.Â In referencing features, the <code>rel</code>
                attribute must contain the term <code>feature</code> (as defined in the <link
                    linkend="rdfPredefinedVocabsDecl">Z39.98-2012 Instance Metadata
                    Vocabulary</link>). Each feature similarly must reference its unique name and
                version number.</para>


            <para> <link linkend="ex006">Example 6</link> illustrates a compliant profile and feature 
                reference in the <code>head</code> element of a Z39.98-AI document.</para>

            <example xml:id="ex006">
                <title>Referencing a profile and features from a Z39.98-AI document</title>
                <programlisting xml:space="preserve"><?example id='ai-head-profile-and-feature-decl'?></programlisting>
            </example>

            <para>Note that in the above example, the feature reference <code>meta</code> elements
                are nested within the profile reference <code>meta</code> element. This is not a
                conformance criterion. The order in which the references appear, and whether or not
                they are nested within each other, is not significant.</para>

        </section>

        <section xml:id="documentsReferencingVocabs">
            <title>Referencing RDF vocabularies</title>

            <para> Documents must include a <code>meta</code> element in the document
                    <code>head</code> that references the URI of their <link
                    linkend="rdfAssociatingVocab">initial context document</link>, as illustrated
                in <link linkend="ex007">Example 7</link>.</para>

            <example xml:id="ex007">
                <title>Referencing an RDFa initial context document</title>
                <programlisting xml:space="preserve"><?example id='ai-default-profile-ref'?></programlisting>
            </example>

            <para> The referenced context document may define a default vocabulary, which allows the
                terms from that vocabulary to be added in their unprefixed form. A document that has
                the <link linkend="rdfPredefinedVocabsCore">Z39.98-2012 Structural Semantics
                    Vocabulary</link> as its default, for example, would allow the use of the
                    <code>chapter</code> term from that vocabulary as follows: </para>

            <example xml:id="ex008">
                <title>Referencing a term from the default vocabulary</title>
                <programlisting xml:space="preserve"><?example id='ai-default-vocab-term-ref'?></programlisting>
            </example>

            <para> The referenced RDFa context document may also define one or more fixed prefixes
                for referencing terms from additional vocabularies. <link linkend="ex009">Example 9</link> 
                shows the new markup that would result if the Z39.98-2012 Structural Semantics Vocabulary were
                instead associated with the prefix <code>struct</code>. </para>

            <example xml:id="ex009">
                <title>Referencing a term from a prefixed vocabulary</title>
                <programlisting xml:space="preserve"><?example id='ai-vocab-term-ref'?></programlisting>
            </example>

            <para> If additional vocabularies not defined in the RDFa context document are needed,
                the <link xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#rdfa.prefix.attrib"
                    >prefix</link> attribute must be attached to the <code>document</code> element
                to declare them: </para>

            <example xml:id="ex010">
                <title>Referencing an RDFa vocabulary</title>
                <programlisting xml:space="preserve"><?example id='ai-vocab-ref'?></programlisting>
            </example>

            <para> Note that the <code>xmlns</code> namespace declaration attribute <xref
                    linkend="refXMLNamespaces"/> must not be used to declare vocabulary prefixes. </para>

            <example xml:id="ex011">
                <title>Invalid vocabulary prefix declaration using the <code>xmlns</code>
                    attribute</title>
                <programlisting xml:space="preserve"><?example id='ai-invalid-xmlns-ref'?></programlisting>
            </example>
        </section>

        <section xml:id="documentsMetadata">
            <title>Metadata</title>

            <section xml:id="documentsMetadataIntroduction">
                <title>Introduction</title>

                <para> Access to comprehensive metadata is critical to producers, distributors, and
                    consumers of books and other digital resources. Fulfilling this need is
                    complicated, however, by the wide variety of standards and applications of
                    metadata. In response, the Z39.98-AI Framework has been created with an open
                    approach to specifying and attaching information resources: </para>

                <itemizedlist>
                    <listitem>
                        <para> it allows producers to reference multiple information resources,
                            conforming to different standards, as their internal and external needs
                            require, dropping the rigidity of embedded metadata; </para>
                    </listitem>
                    <listitem>
                        <para> it fully embraces the RDF metadata standard and the <code>role</code>
                            attribute for attaching machine-readable and grammar-definable metadata,
                            ensuring that metadata has first-class standing within the Framework and
                            can be easily attached where needed and as needed; and </para>
                    </listitem>
                    <listitem>
                        <para> it incorporates metadata elements and attributes that allow for
                            self-documentation of Framework components, simplifying the process of
                            creating and publishing new profiles. </para>
                    </listitem>
                </itemizedlist>

                <para> The rationale for referencing document metadata resources instead of
                    embedding is two-fold. First, it allows the variety needed to meet the
                    real-world production needs of producers. Second, using the Z39.98-AI document
                    itself as the source of metadata is not an intuitively sound design principle:
                    information retrieval, processing, and sharing are all greatly enhanced when
                    metadata information remains distinct from the object it describes. </para>

                <para> The move to standardized metadata attributes brings the specification in line
                    with current best practices for attaching metadata. It also brings a measure of
                    consistency to metadata by allowing controlled vocabularies to be defined (i.e.,
                    semantics are not purely at the discretion of producers). </para>

                <para> There is no imperative that the complete document metadata actually appear in
                    the document itself, so long as the document can be unambiguously identified and
                    include information on how to obtain additional metadata. With that information,
                    a processing agent can access whatever other information might be necessary â if
                    any â to complete its work. </para>

                <para> The metadata requirements for a Z39.98-AI document serve two purposes: <orderedlist>
                        <listitem>
                            <para>to uniquely identify the document and its publisher; and</para>
                        </listitem>
                        <listitem>
                            <para>to provide references to one or more resources that provide more
                                detailed metadata.</para>
                        </listitem>
                    </orderedlist> Z39.98-AI documents use mandated Dublin Core metadata to identify
                    the document and its publisher. Additional <!--External--> metadata is
                    referenced by URI using constructs defined by an RDF vocabulary. The method of
                    linking to metadata encompasses strategies as simple as a self-reference to the
                    document itself (if the producer chooses to include metadata within the
                    document), or as complex as URIs to web services that allow the querying of
                    producer databases directly. Multiple complementary metadata may be referenced,
                    allowing for different metadata standards to be used by different kinds of
                    systems. </para>

            </section>

            <section xml:id="documentsMetadataRequired">
                <title>Required document-level metadata</title>

                <para>Every conforming Z39.98-AI document must include a minimal set of metadata,
                    defined below, that uniquely identifies the document and its publisher. Metadata
                    is referenced using <code>meta</code> elements within the <code>head</code>
                    element of the document. Metadata items are given as name-value pairs. The
                        <code>property</code> attribute is used to identify the name of the metadata
                    item and the <code>content</code> attribute, or alternatively <code>meta</code>
                    element content, contains the actual metadata item value.</para>

                <para>The metadata names used are taken from the Dublin Core Metadata Initiative
                        <xref linkend="refDC"/> vocabulary. All <code>property</code> attribute
                    values must reference properties in the <xref linkend="refDC"/> vocabulary using
                    the <code>dc</code> prefix (see <xref linkend="documentsReferencingVocabs"/> for
                    more information on associating vocabularies).</para>

                <para>Every conforming Z39.98-AI document must contain the following three metadata
                    items: <variablelist>
                        <varlistentry>
                            <term>
                                <code>identifier</code>
                            </term>
                            <listitem>
                                <para>A string that uniquely identifies the document as created by
                                    the document producer. Note that, in the case of a republisher,
                                    this identifier should not refer to the document source.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>
                                <code>publisher</code>
                            </term>
                            <listitem>
                                <para>The name of the publisher of this document.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>
                                <code>date</code>
                            </term>
                            <listitem>
                                <para>The date this document was last modified. For the purposes of
                                    Z39.98-AI documents, this value also serves as a version
                                    identifier. The of this property value must be a valid W3C
                                    dateTime of the form <code>CCYY-MM-DDThh:mm:ssZ</code>.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                </para>
            </section>

            <section xml:id="documentsMetadataExternal">
                <title>Document-level metadata resources</title>

                <para> Z39.98-AI documents may refer to any number of <!-- external --> metadata
                    resources. These may include files (either local or remote), web services, or
                    any other resource that can be referenced by a URI (including the Z39.98-AI
                    document itself). </para>

                <para>Metadata resources are identified using <code>meta</code> elements within the
                    document <code>head</code> with the following required attributes: <variablelist>
                        <varlistentry>
                            <term>
                                <code>rel</code>
                            </term>
                            <listitem>
                                <para>Must refer to the <code>meta-record</code> term in the <xref
                                        linkend="rdfPredefinedVocabsDecl"/>.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>
                                <code>resource</code>
                            </term>
                            <listitem>
                                <para>Must be a valid, resolving URI that points to the metadata
                                    resource.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                </para>

                <para>Each metadata resource identified in the document must also have its type
                    identified using an additional <code>meta</code> element with the following
                    mandatory attributes: <variablelist>
                        <varlistentry>
                            <term>
                                <code>property</code>
                            </term>
                            <listitem>
                                <para>Must refer to the <code>meta-record-type</code> term in the
                                        <xref linkend="rdfPredefinedVocabsDecl"/>.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>
                                <code>about</code>
                            </term>
                            <listitem>
                                <para>Must be the URI of the external metadata resource.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>
                                <code>content</code>
                            </term>
                            <listitem>
                                <para>Must refer to one of the terms in the <xref
                                        linkend="rdfPredefinedVocabsDecl"/> that refer to metadata
                                    standards.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                </para>

                <para> In addition, the specific version of the metadata type may be identified
                    using a <code>meta</code> element with the following required attributes: <variablelist>
                        <varlistentry>
                            <term>
                                <code>property</code>
                            </term>
                            <listitem>
                                <para>Must refer to the <code>meta-record-version</code> term in the
                                        <xref linkend="rdfPredefinedVocabsDecl"/>.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>
                                <code>about</code>
                            </term>
                            <listitem>
                                <para>Must be the URI of the external metadata resource.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>
                                <code>content</code>
                            </term>
                            <listitem>
                                <para>Must be a string identifying the metadata standard
                                    version.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                </para>

                <para><link linkend="ex012">Example 12</link> shows how metadata would be expressed in the 
                    <code>head</code> element of a Z39.98-AI document.</para>

                <example xml:id="ex012">
                    <title>Z39.98-AI document metadata</title>
                    <programlisting><?example id='ai-head-metadata' ?></programlisting>
                </example>

                <para>Note that the use of nested <code>meta</code> elements for external metadata
                    resource references is not a conformance criterion. The order in which the
                    references appear, and whether or not they are nested within each other, is
                    insignificant.</para>
            </section>

            <section xml:id="documentsMetadataAssociations">
                <title>RDFa metadata associations</title>

                <para>Z39.98-AI documents may contain elements that function as micro-documents. The
                        <link xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.article"
                            ><code>article</code></link> element, for example, incorporates its own
                    metadata container and content body, allowing it to function as a self-contained
                    document. Typical <xref linkend="refRDFa11"/> processing of metadata
                    expressions, however, requires that an expression that doesn't identify its
                    subject (e.g., via an <code>about</code> attribute) "bubble up" to the nearest
                    containing expression (see the concept of <emphasis>chaining</emphasis> in <xref
                        linkend="refRDFa11"/>). If none is found, the expression represents some
                    aspect of the document as a whole, such as its unique identifier or
                    publisher.</para>

                <para>In the case of micro-document elements, metadata without an explicit
                    association ideally would similarly define some aspect of the containing
                    micro-document. An RDFa processor will not make this association implicitly in
                    the way that it does with the document, however, because the processor has no
                    concept of containing elements. Consequently, it will either associate the
                    expression with a property further up the document chain or with the document
                    itself. Although the correct processing behavior, it is not what many authors
                    will expect when adding metadata to a micro-document element.</para>

                <para>To simplify the process of adding metadata to micro-documents, this
                    specification introduces a special implied association mechanism for elements
                    intended to function as micro-documents: the container element must be handled
                    as though it has an <code>about</code> attribute attached that defines itself as
                    the subject of all such expressions.</para>

                <para>To exemplify, the following micro-document element declaration:</para>

                <informalexample>
                    <programlisting><![CDATA[<article>]]></programlisting>
                </informalexample>

                <para>must be treated as equivalent to the following RDFa expression:</para>

                <informalexample>
                    <programlisting><![CDATA[<article xml:id="article01" about="#article01">]]></programlisting>
                </informalexample>

                <para>By adding this implied association, all metadata defined within the container
                    is ensured to have the micro-document as its subject if no other is
                    defined.</para>

                <para>Only elements that include both a metadata container and content body should
                    be treated as micro-documents and enabling this behavior. If implicit
                    associations are not desired, an element's documentation must explicitly state
                    the lack of this supporting behavior.</para>

                <para>In order to generate an accurate RDF graph from a document that relies on
                    implied associations, a processing step to make all implicit associations
                    explicit will need to be undertaken first, which may or may not also include
                    adding missing <code>xml:id</code> attributes. Authors are encouraged to avoid
                    relying on this implied mechanism, and the requisite intermediary processing,
                    when RDF metadata generation and manipulation is an important workflow
                    requirement.</para>
            </section>

            <section xml:id="documentsMetadataInline">
                <title>Inline metadata</title>

                <para>Metadata may also be expressed inline using the RDFa attributes available in
                    the <link linkend="abstractDocumentModel_metaAttributesCollection">Metadata
                        Attributes collection</link> (i.e., on elements in the document
                        <code>body</code>). This mechanism for specifying metadata may be
                    used to provide either document-level metadata as outlined in <xref
                        linkend="documentsMetadata"/> or to provide metadata for document
                    fragments.</para>

                <para>This specification does not mandate the use of any specific RDF vocabulary for
                    inlining metadata information, but relies on the vocabulary association
                    mechanism defined in <xref linkend="rdfAssociatingVocab"/>.</para>

                <para><link linkend="ex013">Example 13</link> shows how to use inline metadata in the body of a
                    Z39.98-AI document. The example assumes the <xref
                        linkend="rdfPredefinedVocabsCore"/> has been declared as the default
                    vocabulary for the document.</para>

                <example xml:id="ex013">
                    <title>Inline metadata</title>
                    <programlisting><?example id='ai-metadata-inline'?></programlisting>
                </example>
            </section>

        </section>

        <!-- mg: this is replaced by a conformance req on xinclide for PAs
        <section xml:id="documentsXinclude" conformance="informative">
            <title>Representing Z39.98-AI documents using multiple files</title>
            <para> Logically, a Z39.98-AI document is a single XML Infoset as defined in <xref
                    linkend="refXMLInfoset"/>. However, for authoring purposes it may be useful to
                store the data in multiple physical files. By including the <code>xml:base</code>
                attribute in all element attribute models, all conforming Z39.98-AI Framework
                profiles are compatible with <xref linkend="refXInclude"/>, which provides a
                convenient and standards-based way to do this. </para>
        </section>
        -->

    </chapter>

    <chapter xml:id="container">
        <title>Container</title>

        <section xml:id="container_intro">
            <title>Introduction</title>
            <para> The need to package Z39.98 documents together with the local resources they
                reference has always existed, but the method and format for achieving this goal has
                not been formally defined in previous versions of the specification. As a result,
                producers have had the freedom to package their document sets in any of a variety of
                formats as their needs required, while user agent developers have been left with the
                problem of handling this variation when processing the container files. </para>
            <para> This specification seeks to redress this issue by formally defining the packaging
                format and MIME type <xref linkend="refRFC2046"/> for bundling the local resources in Z39.98-AI document set, as
                well as to propose a common file extension format for the identification of
                container files. This approach will allow the rapid deployment and exchange of
                container files by removing the unnecessary ambiguity and investigation that has
                existed regarding their format and structure. </para>

            <note>
                <para> Although remote resources are an integral part of a document set, they are
                    referenced and obtained from their remote location by processing agents. Remote
                    resources optionally can be obtained and included as local resources within the
                    container for distribution/processing purposes, but any references to them in
                    the Z39.98-AI document should be updated to point to their new local location to
                    prevent repeat requests by processing agents. </para>
            </note>

        </section>

        <section xml:id="container_format">
            <title>Format</title>
            <para> The Z39.98-AI container format uses a modified version of the Open Container
                Format <xref linkend="refOCF"/> to bundle into a single file all the local resources
                that constitute a Z39.98-AI document set. All requirements detailed in the OCF
                specification apply to the creation of Z39.98-AI container files, except where
                modified by this section. </para>

            <para> The Z39.98-AI container format employs the modified version of the ZIP format
                detailed in Section 4 of <xref linkend="refOCF"/>. For identifying that the file is
                a Z39.98-AI container, however, the following MIME type <xref linkend="refRFC2046"/> must be used instead:
                    <code>application/z3998-auth+zip</code> (see <xref
                    linkend="container_mediaTypes"/>). </para>

            <para> Each conformant container file must include a <code>META-INF</code> directory at
                the root of the container as per Section 3.5 of <xref linkend="refOCF"/>. This
                directory must include the required <code>container.xml</code> file detailed in
                Section 3.5.1 of <xref linkend="refOCF"/>, which in turn must contain a
                    <code>rootfile</code> element that points to the root Z39.98-AI document. </para>

            <para> The root document must be identified by the MIME type
                    <code>application/z3998-auth+xml</code> (see <xref
                    linkend="container_mediaTypes"/>) and the container must include the root
                document as a resource. The container must not include references to external documents.
                If a document has been decomposed into smaller XML fragments, the root
                must be the XML file into which all the components are included to reconstitute the
                complete Z39.98-AI document. </para>

            <para> The container must include the Z39.98-AI document together with all of the local
                resources associated with it. The container may include alternate renditions of a
                document, but must not contain more than a single Z39.98-AI document. </para>

            <para> The optional reserved files allowed by the OCF specification are handled as
                follows: </para>

            <itemizedlist>
                <listitem>
                    <para>
                        <code>metadata.xml</code>, <code>manifest.xml</code>
                            and<code>signatures.xml</code> are not a normative part of the Z39.98-AI
                        container format, but may be included if desired. Processing agent support
                        must not be expected for these files or for the signing of container files,
                        however. </para>
                </listitem>
                <listitem>
                    <para> The contents of a Z39.98-AI container file must not be encrypted or have
                        digital rights management schemes applied to them, so the
                            <code>encryption.xml</code> and <code>rights.xml</code> files are not
                        supported and should not be included. Where security is an issue, alternate
                        means of protecting the container file should be pursued instead. </para>
                </listitem>
            </itemizedlist>

            <para> The Z39.98-AI container format does not support OEBPS package files <xref
                    linkend="refOPF"/> and their inclusion in container files is not recommended. </para>


            <para><link linkend="ex014">Example 14</link> shows the structure of a typical Z39.98-AI container
                file. </para>

            <example xml:id="ex014">
                <title>Z39.98-AI container file structure</title>

                <programlisting xml:space="preserve">
mimetype
META-INF/
   container.xml
Z3998-AI/
   On the Origin of Species.xml
   metadata/
      mods.xml
      onix.xml
   images/
      cover.png
                    </programlisting>
            </example>

            <para> <link linkend="ex015">Example 15</link> shows the contents of the <code>container.xml</code> 
                file. The <code>rootfile</code> points to the root Z39.98-AI document. </para>

            <example xml:id="ex015">
                <title><code>container.xml</code> file mark up</title>

                <programlisting xml:space="preserve">
<![CDATA[
<?xml version="1.0"?>
<container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container">
  <rootfiles>
    <rootfile full-path="Z3998-AI/On the Origin of Species.xml" media-type="application/z3998-auth+xml" />
  </rootfiles>
</container>
]]>
                    </programlisting>
            </example>

        </section>

        <section xml:id="container_extension">
            <title>File extension</title>
            <para> To facilitate the identification of the Z39.98-AI container files, containers
                should use the extension <code>.zai</code>. Alternate file extensions may be used
                so long as the container conforms with the ZIP requirements outlined in <xref
                    linkend="container_format"/>. </para>
            <para> File extensions are only a hint to the format of a container; the container's
                    <code>mimetype</code> file is the primary designator of the contents. </para>
        </section>

        <section xml:id="container_mediaTypes">
            <title>Media types</title>
            <para> This specification defines the following two new media types: </para>

            <variablelist>
                <varlistentry>
                    <term><code>application/z3998-auth+zip</code></term>
                    <listitem>
                        <para>identifies a Z39.98-AI container file.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term><code>application/z3998-auth+xml</code></term>
                    <listitem>
                        <para>identifies a Z39.98-AI document.</para>
                    </listitem>
                </varlistentry>
            </variablelist>

            <para>Refer to <xref linkend="mediaTypeRegistration"/> for more information.</para>
        </section>

    </chapter>

    <chapter xml:id="resourcedirectory">
        <title>Resource directories</title>

        <section xml:id="resourcedirectoryIntroduction">
            <title>Introduction</title>

            <para>Profiles and features are fully-developed markup languages in their own rights,
                and typically require multiple documents to define them normatively: schemas, RDF
                vocabularies, and often normative prose. Profiles and features typically also
                provide informative resources, such as primers, best practice guides, and references
                to supporting software to assist users with their implementation. </para>

            <para>To facilitate the discovery of these resources for both human and machine users
                alike, this specification uses XHTML+RDFa <xref linkend="refXHTMLRDFa"/> as the
                mechanism to associate a collection of normative and informative resources with a
                profile or a feature. The XHTML+RDFa document used to collect the references to
                these resources is called a resource directory.</para>

            <para>As XHTML documents, resource directories are human-readable, and thus may serve as
                the primary source of information for all users of a profile or feature. Resource
                directories are also machine-readable documents, and thus may be sources for the
                discovery and retrieval of schemas, style sheets, RDF vocabularies and other types
                of resources needed by processing agents.</para>

            <para>In order to facilitate interoperability of processing agents, this specification
                defines a <xref linkend="rdfPredefinedVocabsRD"/>. This vocabulary contains terms
                that describe and identify resources associated with profiles and features, and
                states how they are to be used.</para>
        </section>

        <section xml:id="resourcedirectoryConformance">
            <title>Resource directory conformance definition</title>

            <para>The resource directory for a profile or feature must be a document conforming to
                the <xref linkend="refXHTMLRDFa"/> specification, using terms from the <xref
                    linkend="rdfPredefinedVocabsRD"/> as detailed below. </para>

            <itemizedlist>
                <listitem>
                    <para>The resource directory must include one or more references to relevant
                        normative external specifications to which the profile or feature being
                        described adheres. The term used to identify that resource must be <link
                            xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#specification-compliance"
                            >specification-compliance</link>.</para>
                </listitem>
                <listitem>
                    <para>The resource directory must identify the designated maintenance agency of
                        the profile or feature. The term used to identify that agency must be <link
                            xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#maintenance-agency"
                            >maintenance-agency</link>.</para>
                </listitem>
                <listitem>
                    <para>The resource directory should include information on the version history
                        of the profile or feature. A reference to the most recent published version
                        must be expressed using the <link
                            xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#current-version-uri"
                            >current-version-uri</link> term. A reference to a version history
                        catalog must be expressed using the <link
                            xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#version-history"
                            >version-history</link> term. </para>
                </listitem>
                <listitem>
                    <para>The resource directory should include at least one resource identified by
                        the term <link
                            xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/#reference"
                            >reference</link> which resolves to a human-readable description of the
                        profile's or feature's purpose and structure.</para>
                </listitem>

            </itemizedlist>

            <para>Note that additional resource directory requirements specific to profiles and
                features are defined in <xref linkend="profileConformanceResourceDirectory"/> and
                    <xref linkend="featureConformanceResourceDirectory"/> respectively. All other
                terms defined by the <xref linkend="rdfPredefinedVocabsRD"/> are optional.</para>

            <para>This specification allows terms from other vocabularies than the <xref
                    linkend="rdfPredefinedVocabsRD"/> to be included in resource directory
                documents.</para>

        </section>

    </chapter>

    <chapter xml:id="rdfVocabularies">
        <title>RDF vocabularies</title>

        <section xml:id="rdfIntro">
            <title>Introduction</title>

            <para> The Z39.98-AI Framework makes use of <xref linkend="refRDFa11"/> and the <link
                    xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#z3998.role.attrib"
                    >role</link> attribute to express document-level metadata and to express
                semantic inflections on individual elements in the document content (see <xref
                    linkend="abstractDocumentModel_metaAttributesCollection"/>). RDF vocabularies
                are used to define controlled lists of terms to provide consistency in the
                application of metadata across profiles and between producers. </para>

            <para>The Z39.98-AI Framework includes a set of predefined vocabularies (see <xref
                    linkend="vocabCatalog"/>). This section describes the nature of these
                vocabularies and defines rules for how to associate these and additional
                vocabularies with a Z39.98-AI document. Rules for the processing of vocabulary terms
                are defined in <xref linkend="processingAgentConformanceRDF"/>.</para>
        </section>

        <section xml:id="rdfPredefinedVocabs">
            <title>Vocabularies defined by this specification</title>
            <section xml:id="rdfPredefinedVocabsDecl"
                xreflabel="Z39.98-2012 Instance Metadata Vocabulary">
                <title>Z39.98-2012 Instance Metadata Vocabulary</title>
                <para>This vocabulary defines a set of terms for use in declaring the profile to
                    which the document conforms as well as any features in use (see <xref
                        linkend="documentsReferencingProfilesFeatures"/>). It also facilitates the
                    expression of document-level metadata (see <xref linkend="documentsMetadata"/>).
                    Use of this vocabulary is required in all profiles. </para>
                <para>The canonical URI of the Instance Metadata Vocabulary is <link
                        xlink:href="http://www.daisy.org/z3998/2012/vocab/decl/"
                        >http://www.daisy.org/z3998/2012/vocab/decl/</link>.</para>
            </section>

            <section xml:id="rdfPredefinedVocabsCore"
                xreflabel="Z39.98-2012 Structural Semantics Vocabulary">
                <title>Z39.98-2012 Structural Semantics Vocabulary</title>
                <para>This vocabulary defines a set of terms relating to the description of
                    structural semantics of documents in general, and written works in particular.
                    It is primarily intended to be used for semantic inflection on individual
                    elements in the document content. Use of this vocabulary is optional.</para>
                <para>The canonical URI of the Structural Semantics Vocabulary <link
                        xlink:href="http://www.daisy.org/z3998/2012/vocab/structure/"
                        >http://www.daisy.org/z3998/2012/vocab/structure/</link>.</para>
            </section>

            <section xml:id="rdfPredefinedVocabsRD"
                xreflabel="Z39.98-2012 Resource Directory Vocabulary">
                <title>Z39.98-2012 Resource Directory Vocabulary</title>
                <para>This vocabulary defines a set of terms for use in profile and feature resource
                    directories. Requirements on the application of this vocabulary in resource
                    directory documents are defined in <xref linkend="resourcedirectoryConformance"
                    />.</para>
                <para>The canonical URI of the Resource Directory Vocabulary is <link
                        xlink:href="http://www.daisy.org/z3998/2012/vocab/resourcedirectory/"
                        >http://www.daisy.org/z3998/2012/vocab/resourcedirectory/</link>.</para>
            </section>
        </section>

        <section xml:id="rdfAssociatingVocab">
            <title>Associating vocabularies with Z39.98-AI documents</title>

            <para> An initial context document, as defined in section 9 of <xref linkend="refRDFa11"
                />, is an XHTML+RDFa <xref linkend="refXHTMLRDFa"/> document that defines the
                default RDF vocabulary for a Z39.98-AI profile (enabling the use of unprefixed
                CURIEs) as well as any additional vocabulary prefixes directly supported. Each
                Z39.98-AI profile must specify the URI of its initial context document in its
                resource directory using the term <code>z3998-rdfa-context</code> from the <xref
                    linkend="rdfPredefinedVocabsDecl"/> (see <xref
                    linkend="profileConformanceResourceDirectory"/>). </para>

            <para> Z39.98-AI profile documents must identify their initial context document in the
                    <code>resource</code> attribute of a <code>meta</code> element specifying the
                relationship <code>z3998:rdfa-context</code> in its <code>rel</code> attribute. </para>

            <example xml:id="ex016">
                <title>Declaring an initial context document</title>
                <programlisting xml:space="preserve"><?example id='ai-document-context'?></programlisting>
            </example>

            <para>When processing a document, the default vocabulary and any prefixes defined in the
                initial context document must be used to dereference any CURIE values found in
                RDFa-compliant attributes. If, however, a child element defines its own metadata
                container, such as the <code>article</code> element, that element may define a
                localized context in their child metadata container element by the same means. When
                a localized context is defined, processors must ignore the context defined by the
                host document. </para>

            <para> Only CURIEs from the default vocabulary defined in the initial context document
                may be referenced in their unprefixed form. The initial context document may also
                define CURIE prefix bindings, and these must be used to reference the associated
                vocabularies. </para>

            <para> A vocabulary that has not been defined in the initial context document may still
                be referenced and used to attach metadata to a document. In this case, a prefix
                definition must be added to the document using the RDFa <code><link
                        xlink:href="http://www.daisy.org/z3998/2012/auth/cm/#rdfa.prefix.attrib"
                        >prefix</link></code> attribute on the root <code>document</code> element.
                Prefixes are declared in whitespace separated pairs of the form:</para>

            <programlisting xml:space="preserve">
                    <code>NCName: URI</code>
            </programlisting>

            <para> The <code>prefix</code> attribute must not be used to redeclare prefixes or URIs
                that have already been defined in the initial context document. The
                    <code>xmlns</code> attribute must not be used to declare RDFa vocabulary
                prefixes. </para>

            <para> All unprefixed CURIEs must resolve to a term in the default vocabulary in order
                for a document to be valid. It is not valid to use a CURIE prefix or reference terms
                from a vocabulary that has not been defined in the initial context document or
                    <code>prefix</code> attribute. </para>

            <para> A Z39.98-AI profile must not impose restrictions on the occurrence of references
                to vocabularies, except as relates to the initial context document. </para>
        </section>

        <section xml:id="rdfVocabFormats">
            <title>Format of RDF vocabularies</title>
            <para>This specification does not impose any restrictions on the format of RDF
                vocabularies associated with Z39.98-AI documents.</para>
            <para>When developing vocabularies intended for use within the Z39.98-AI Framework, RDFa
                in XHTML, as defined by <xref linkend="refXHTMLRDFa"/>, is recommended to be the
                principal publication form. Implementers should be aware that vocabularies expressed
                in for example RDF Schema <xref linkend="refRDFs"/> or Notation3 <xref
                    linkend="refN3"/> may also occur.</para>
        </section>

        <section xml:id="rdfVocabChanges">
            <title>Changes to RDF vocabularies</title>
            <para> Vocabularies are evolving documents, just like the profiles that reference them.
                The terms they contain may be modified or added to as required to augment the needs
                of profile and document creators. Terms should not be removed from vocabularies,
                however. If a term is no longer needed or has been replaced by another, its use
                should be deprecated. </para>

            <para> Vocabularies are not required to identify their current version in their
                canonical URI, but should include a revision history. Processing agent developers
                consequently need to be aware that changes may occur independently of profiles and
                take measures to ensure that inconsistencies do not arise. </para>
        </section>

    </chapter>

    <chapter xml:id="processingAgents">
        <title>Processing agents</title>

        <section xml:id="processingAgentsIntro">
            <title>Introduction</title>

            <para> Processing agents are the applications used to interact with a Z39.98-AI document
                during its lifecycle, from its creation through to its provision to end users.
                Primary examples include programs that facilitate the markup of documents (XML
                editors and word processing applications), programs that check document integrity
                (validators), and programs that process documents to create final output formats
                (transformation pipelines). Note that the definition of processing agent as used in
                this specification does not include applications used for consumption by end users,
                as this specification does not cover the user-oriented formats that may result from
                the transformation of a Z39.98-AI document. </para>

            <para>Processing agents are not expected to be able to handle any Z39.98-AI document
                that they encounter. A processing agent declares support for profiles individually,
                and must abort processing whenever it encounters a document conforming to a profile
                that it does not support, and by default also when encountering a document
                conforming to a supported profile but with an unsupported version number (either
                newer or older). Although this restriction is severe, it ensures that documents are
                not rendered in a way that contradicts their intended use, and that any resulting
                outputs are not prone to bugs resulting from the passive application of new or
                out-dated rules. This draconian abort principle is primarily motivated by the
                anticipated use of the Z39.98-AI framework in fully automated provisioning contexts
                where errors must not pass through silently, and where the integrity of the output
                cannot be manually controlled.</para>

            <para> A processing agent's support for features is independent of its support for
                profiles, and by default the same draconian abort principle applies when
                encountering an unrecognized or unsupported feature. As described in <xref
                    linkend="processingAgentConformanceInitializationBehavior"/>, however, features
                may define fallback methods that allow processing agents to adapt their behavior in
                a controlled manner and continue processing the document in spite of the fact that a
                given feature is not supported. </para>

            <para> All processing agents should provide complete profile and feature support
                information to users in order to reduce the likelihood that they will be used to
                process incompatible documents and to ensure that they conform to user expectations. </para>

        </section>

        <section xml:id="processingAgentConformance">
            <title>Processing agent conformance definition</title>
            <para>A conformant processing agent must meet all of the following criteria:</para>
            <itemizedlist>
                <listitem>
                    <para>It must adhere to all conformance requirements on non-validating XML
                        processors as defined in <xref linkend="refXML"/>.</para>
                </listitem>
                <listitem>
                    <para>It must adhere to all conformance requirements on processors as defined in
                            <xref linkend="refXMLNamespaces"/>.</para>
                </listitem>
                <listitem>
                    <para>It must adhere to all conformance requirements on applications as defined
                        in <xref linkend="refXMLID"/>.</para>
                </listitem>
                <listitem>
                    <para>It must adhere to all conformance requirements on applications as defined
                        in <xref linkend="refXMLBase"/>.</para>
                </listitem>
                <listitem>
                    <para>It should be a conformant application as defined in XML Inclusions <xref
                            linkend="refXInclude"/>, including support for Namespace Fixup, Base URI
                        Fixup and Language Fixup of the result infoset.</para>
                    <para> If it is not a conformant application as defined in XML Inclusions, it
                        must, if set to process a document that contains elements in the <link
                            xlink:href="http://www.w3.org/TR/xinclude/#syntax">XInclude
                            namespace</link>, issue a notification and abort processing .</para>
                </listitem>
                <listitem>
                    <para>It must detect and handle document profile and feature references as
                        specified in <xref
                            linkend="processingAgentConformanceInitializationBehavior"/>.</para>
                </listitem>
                <listitem>
                    <para>It must comply to the requirements for processing RDF vocabulary terms
                        specified in <xref linkend="processingAgentConformanceRDF"/>.</para>
                </listitem>
                <listitem>
                    <para> It must be able to recognize by their <filename>mimetype</filename>, and
                        unbundle, Z39.98-AI document sets packaged according to the container file
                        format detailed in <xref linkend="container_format"/>.
                        <!-- When encountering invalid
                        containers, whether in format or contents, it must issue a notification and
                        abort processing. -->
                    </para>
                </listitem>
                <listitem>
                    <para>If claiming to support a given profile or feature, it must adhere to all
                        behavioral rules defined by the given profile or feature through the
                        corresponding resource directory and in the associated definitions.</para>
                </listitem>
            </itemizedlist>

            <para>A conforming processing agent is not required to be validating (i.e. support
                validating a given Z39.98-AI document against the schema resource(s) defined as
                normative in the resource directory of a given profile). A conforming processing
                agent may abort processing if set to process a document that is known to be
                invalid.</para>
        </section>

        <section xml:id="processingAgentConformanceInitializationBehavior">
            <title>Initialization</title>

            <para>Processing agents must execute the following ordered sequence of steps during the
                initial stage of processing a Z39.98-AI document:</para>

            <orderedlist>
                <listitem>
                    <para>The processing agent attempts to retrieve the <link
                            linkend="profileConformanceIdentityURI">profile identity URI</link>,
                        available at the document location defined in <xref
                            linkend="documentsReferencingProfilesFeatures"/>.</para>
                </listitem>
                <listitem>
                    <para>If retrieval of the profile identity URI fails, then the processing agent
                        must issue a notification and abort processing.</para>
                </listitem>
                <listitem>
                    <para>Else, the processing agent analyzes the identity URI in order to ascertain
                        whether the document adheres to a profile that the processing agent
                        supports: </para>
                    <itemizedlist xml:id="processingIdentityURIParsing">
                        <listitem>
                            <para>If the profile identity URI excluding the version segment
                                represents a profile that is not supported by the processing agent,
                                then it must issue a notification and abort processing.</para>
                        </listitem>
                        <listitem xml:id="processingIdentityURIParsingVersionSegment">
                            <para>Else, if the version segment represents a profile version that is
                                not supported by the processing agent, then it must issue a
                                notification and abort processing, unless explicitly instructed by
                                the client to continue processing under this particular
                                circumstance. </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
                <listitem>
                    <para>The processing agent retrieves any <link
                            linkend="featureConformanceIdentityURI">feature identity URIs</link>,
                        available at the document location defined in <xref
                            linkend="documentsReferencingProfilesFeatures"/>.</para>
                    <para>The processing agent analyses each identity URI in turn in order to
                        ascertain whether the feature represented by the URI is either
                            <emphasis>supported</emphasis>, <emphasis>recognized but not
                            supported</emphasis>, or <emphasis>not recognized</emphasis>:</para>
                    <variablelist>
                        <varlistentry>
                            <term>Not recognized</term>
                            <listitem>
                                <para>If the feature identity URI excluding the version segment
                                    represents a feature that is not recognized by the processing
                                    agent, then it must issue a notification and abort
                                    processing.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Recognized but not supported</term>
                            <listitem>
                                <para>If the feature identity URI represents a feature that is
                                    recognized but not supported by processing agent, then it must
                                    issue a notification and abort processing, unless normative
                                    prose available through the feature's resource directory
                                    specifies a behavioral fallback to employ under this particular
                                    circumstance.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Supported</term>
                            <listitem>
                                <para>If the feature identity URI excluding the version segment
                                    represents a feature that is supported by the processing agent,
                                    then it processes the version segment in the same way as for
                                        <link linkend="processingIdentityURIParsingVersionSegment"
                                        >profile version segments</link>. </para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                </listitem>
                <listitem>
                    <para>If the processing agent reaches this step without having aborted
                        processing, it has completed initialization successfully.</para>
                </listitem>
            </orderedlist>
        </section>

        <section xml:id="processingAgentConformanceRDF">
            <title>Processing of vocabulary terms</title>
            <para>The following rules apply to processing agents with regards to the processing of
                RDF vocabulary terms:</para>
            <itemizedlist>
                <listitem>
                    <para>A processing agent must recognize the terms used to express the required
                        document-level metadata (see <xref linkend="documentsMetadataRequired"/>),
                        and the terms used to express the profile to which the document conforms
                        (see <xref linkend="documentsReferencingProfilesFeatures"/>).</para>
                </listitem>
                <listitem>
                    <para>If a processing agent claims support for a profile and the profile defines
                        a default RDF vocabulary, then the processing agent should natively
                        recognize all terms in that vocabulary.</para>
                </listitem>
                <listitem>
                    <para>A processing agent may associate specialized behaviors with none, some or
                        all of the RDF vocabulary terms that it natively recognizes.</para>
                </listitem>
                <listitem>
                    <para>A processing agent should support the dereferencing of unrecognized CURIEs
                        occurring in Z39.98-AI documents. If a processing agent successfully
                        dereferences an unrecognized CURIE, it may (depending on the nature of and
                        RDF data available in the referenced vocabulary property) employ adaptive
                        behaviors in response to the change to the document structural semantics
                        that results from the CURIE dereferencing.</para>
                </listitem>
                <listitem>
                    <para>If the attempt of a processing agent to dereference an unrecognized CURIE
                        fails, then the processing agent should issue a notification to the client,
                        and then must continue processing the document, basing its behavior on the
                        carrying XML element alone.</para>
                </listitem>
                <listitem>
                    <para>If a processing agent does not support the dereferencing of unrecognized
                        CURIEs, then the processing agent must upon encountering an unrecognized
                        CURIE continue processing the document, basing its behavior on the carrying
                        XML element alone.</para>
                </listitem>
                <listitem>
                    <para>A processing agent should recognize the implicit metadata association
                        mechanism defined for micro-documents in <xref
                            linkend="documentsMetadataAssociations"/>.</para>
                </listitem>
                <listitem>
                    <para>When a vocabulary term is used for semantic inflection, and processing
                        agent behavior associated with that term contradicts behavior associated
                        with the carrying XML element, then the behavior associated with the element
                        must take precedence.</para>
                </listitem>
            </itemizedlist>
        </section>

    </chapter>
    
    <appendix xml:id="catalogs" conformance="normative">
        <title>Profile, feature, and vocabulary catalogs</title>
        <para> All catalogs listed in this appendix are maintained and hosted by the DAISY Consortium
            under the guidance of its Technical Advisory Committee. For more information about the
            Committee, including its current membership and how to participate, please refer to the
            DAISY Consortium Web site.</para>

        <section xml:id="profileCatalog">
            <title>Profile catalog</title>
            <para>The catalog of profiles is located at <link
                    xlink:href="http://www.daisy.org/z3998/2012/auth/profiles/"
                    >http://www.daisy.org/z3998/2012/auth/profiles/</link>.</para>
        </section>
        <section xml:id="featureCatalog">
            <title>Feature catalog</title>
            <para>The catalog of features is located at <link
                    xlink:href="http://www.daisy.org/z3998/2012/auth/features/"
                    >http://www.daisy.org/z3998/2012/auth/features/</link>.</para>
        </section>
        <section xml:id="vocabCatalog">
            <title>Vocabulary catalog</title>
            <para>The catalog of RDF vocabularies is located at <link
                    xlink:href="http://www.daisy.org/z3998/2012/vocab/"
                    >http://www.daisy.org/z3998/2012/vocab/</link>.</para>
            <para>This catalog normatively defines the URIs of the core vocabularies that are
                predefined by this specification (see <xref linkend="rdfPredefinedVocabs"/>, and may
                be extended to reference additional vocabularies. </para>
        </section>
    </appendix>

    <appendix xml:id="schemas" conformance="normative">
        <title>Schema languages</title>

        <para> The grammars for profiles, modules, and features must be expressed using one or
            more of the following schema languages: </para>

        <itemizedlist>
            <listitem>
                <para>RelaxNG <xref linkend="refRelaxNG"/></para>
            </listitem>
            <listitem>
                <para>NVDLÂ <xref linkend="refNVDL"/></para>
            </listitem>
            <listitem>
                <para>ISO SchematronÂ <xref linkend="refSchematron"/></para>
            </listitem>
            <listitem>
                <para>W3C XML Schema 1.0Â <xref linkend="refXMLSchemaPart1"/>Â <xref
                        linkend="refXMLSchemaPart2"/></para>
            </listitem>
        </itemizedlist>

    </appendix>

    <!--
    <appendix xml:id="versioning" conformance="normative">
        <title>Profile and feature versioning scheme</title>

        <section xml:id="versioningReleases">
            <title>Releases</title>

            <section xml:id="versioningReleasesMajor">
                <title>Major</title>

                <para> Major releases represent significant changes/additions/deletions to the
                    functionality or structure of a profile's components or features, and are
                    typically not backwards compatible with earlier major releases. </para>

                <para> Changes that result in major releases may not always reflect significant
                    changes to content models, but may alter the way that content should be handled
                    or processed. Data conforming to a previous major releases consequently must not
                    be assumed to be be compatible with a new major release, even where that data
                    may continue to be valid. </para>
            </section>

            <section xml:id="versioningReleasesMinor">
                <title>Minor</title>

                <para> Minor releases represent smaller fixes and tweaks to the functionality or
                    structure a profile's components or features. Minor version are typically
                    backwards compatible with other minor releases under the same major release, but
                    may introduce new concepts and components. </para>
            </section>
        </section>

        <section xml:id="versioningScheme">
            <title>Scheme</title>

            <para> All profiles, modules and features must include a version number that uniquely
                identifies them and allows earlier and/or later iterations to be distinguished. In
                the case of profiles and modules, the version number must consist of both a major
                and a minor number using the scheme: </para>

            <programlisting xml:space="preserve">
                <emphasis>major</emphasis>.<emphasis>minor</emphasis>
            </programlisting>

            <para> For features, the idenfication scheme and number used by the maintaining
                authority should be retained. <remark role="todo">TODO this means we have to call
                    the MathML feature 3.0... this was not the intent (we need to version our
                    particular adaption of MathML)</remark></para>

        </section>

        <section xml:id="versioningNumberingConventions">
            <title>Numbering conventions</title>

            <para> It is recommended when issuing new releases that both major and minor indicators
                are incremented in steps of 1. Decrementing of indicators is not permitted, even
                where integer values have been skipped between releases. </para>

            <para> Minor indicators must be padded with 0s to two digits, to prevent the
                sequentiality issues that arise with single digits (e.g., to prevent issues
                determining if <code>1.91</code> is the successor of <code>1.90</code> or
                    <code>1.9</code>). Three digit padding may be used where a high revision release
                schedule is anticipated between major revisions. The padding scheme used must,
                however, remain consistent across a major release, but can change from major release
                to major release. </para>

            <para> It is not valid to append alphabetic identifiers to either major or minor numbers
                (e.g. <code>1.12a</code>). Only integer values are permitted. </para>

            <para> A major number of 0 should only be used for profiles, modules and features that
                are in a pre-release state. </para>

            <para> A minor number of 1 should be used to indicate the initial release of a new major
                version. </para>
        </section>

        <section xml:id="versioningHistory">
            <title>History</title>

            <para> All profiles and modules must provide a revision history for each new major and
                minor release, either embedded within their source or as a part of their abstract
                definition or documentation. The revision history must specify the nature of the
                changes made and their impact on processing agents. </para>

            <para> In the case of features, reference to the revision history and/or new processing
                requirements provided by the maintaining authority must be provided. </para>
        </section> 
        -->
    <!--
        <section xml:id="versioningProcessing">
            <title>Processing</title>

            <section xml:id="versioningProcessingProfiles">
                <title>Profiles</title>

                <para> A processing agent must always abort processing when encountering a Z39.98-AI
                    document that declares an unrecognized profile or a version of a recognized
                    profile that is not supported (either newer or older). </para>

                <para> processing agents must abort processing regardless of whether the unsupported
                    profile represents a change to its major or minor number. No forwards or
                    backwards compatibility of data should ever be assumed, regardless of the nature
                    of the release. </para>
            </section>

            <section xml:id="versioningProcessingFeatures">
                <title>Features</title>

                <para> Similar to profiles, when a processing agent encounters a feature it does not
                    recognize or support, it must abort processing. When encountering an
                    unrecognized version of a supported feature, however, a processing agent may
                    abort or may include a set of fallback behaviors. </para>

            </section>

        </section>
-->
    <!-- </appendix> -->

    <appendix xml:id="mediaTypeRegistration" conformance="normative">
        <title>Media type registration</title>

        <section xml:id="mediaTypeRegistration_xmlDoc">
            <title>Z39.98-AI XML Documents</title>

            <variablelist>
                <varlistentry>
                    <term>Type name</term>
                    <listitem>
                        <para>application</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Subtype name</term>
                    <listitem>
                        <para>z3998-auth+xml</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Required parameters</term>
                    <listitem>
                        <para>None.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Optional parameters</term>
                    <listitem>
                        <variablelist>
                            <varlistentry>
                                <term>charset</term>
                                <listitem>
                                    <para> The same semantics as the <code>charset</code> parameter
                                        of application/xml, as specified in <xref
                                            linkend="refRFC3023"/>. </para>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Encoding considerations</term>
                    <listitem>
                        <para>As Z39.98-AI documents are XML documents, the same encoding
                            considerations apply as for application/xml, as specified in <xref
                                linkend="refRFC3023"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Security considerations</term>
                    <listitem>
                        <para>None.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Interoperability considerations</term>
                    <listitem>
                        <para> Z39.98-AI documents are structured to conform to unique profiles,
                            which means that only well-formedness must be expected. Rules for
                            processing conformant and non-conformant content are provided within
                            this document. </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Published specification</term>
                    <listitem>
                        <para> This media type registration is extracted from Appendix D of the
                                <link linkend="about">Z39.98 Authoring and Interchange
                                Framework for Adaptive XML Publishing Specification</link>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Applications which use this media type</term>
                    <listitem>
                        <para> There are no applications that currently recognize this media type.
                            This new type is being registered to enable operation within XML
                            editors, word processors, web browsers and in text-to-speech playback
                            devices. </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Additional information</term>
                    <listitem>
                        <variablelist>
                            <varlistentry>
                                <term>Magic number(s):</term>
                                <listitem>
                                    <para> No single initial set of bytes uniquely identifies
                                        Z39.98-AI documents. See <xref linkend="refRFC3023"/> for
                                        common considerations for XML documents.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>File extension(s):</term>
                                <listitem>
                                    <para> The extension .xml is primarily used to identify
                                        Z39.98-AI documents, but not exclusively. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Macintosh file type code(s)</term>
                                <listitem>
                                    <para>TEXT</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Intended usage</term>
                    <listitem>
                        <para>COMMON</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Restrictions on usage</term>
                    <listitem>
                        <para>None.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Person to contact for further information</term>
                    <listitem>
                        <variablelist>
                            <varlistentry>
                                <term>Name</term>
                                <listitem>
                                    <para>Markus Gylling</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Email</term>
                                <listitem>
                                    <para>mgylling@daisy.org</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Author/Change controller</term>
                                <listitem>
                                    <para> The Z39.98-AI specification is maintained by the Technical
                                        Advisory Committee of the DAISY Consortium. </para>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>

        <section xml:id="mediaTypeRegistration_container">
            <title>Z39.98-AI container format</title>

            <variablelist>
                <varlistentry>
                    <term>Type name</term>
                    <listitem>
                        <para>application</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Subtype name</term>
                    <listitem>
                        <para> z3998-auth+zip </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Required parameters</term>
                    <listitem>
                        <para>None.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Optional parameters</term>
                    <listitem>
                        <para>None.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Encoding considerations</term>
                    <listitem>
                        <para>Z39.98-AI container files are binary files in ZIP format.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Security considerations</term>
                    <listitem>
                        <para> The file size and validity of container file data should always be
                            rigorously verified by processors. </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Interoperability considerations</term>
                    <listitem>
                        <para>None.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Published specification</term>
                    <listitem>
                        <para> This media type registration is extracted from Appendix D of the
                                <link linkend="about">Z39.98 Authoring and Interchange
                                Framework for Adaptive XML Publishing Specification</link>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Applications which use this media type</term>
                    <listitem>
                        <para> There are no applications that currently recognize this media type.
                            This new type is being registered to enable operation within XML
                            editors, word processors, validators, document transformation
                            applications and applications that perform content transfer and/or
                            retrieval operations. </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Additional information</term>
                    <listitem>
                        <variablelist>
                            <varlistentry>
                                <term>Magic number(s):</term>
                                <listitem>
                                    <para> 0: <literal>PK</literal>, 30:
                                        <literal>mimetype</literal>, 38:
                                            <literal>application/z3998-auth+zip</literal>
                                    </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>File extension(s):</term>
                                <listitem>
                                    <para>
                                        <code>.zai</code>
                                    </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Macintosh file type code(s)</term>
                                <listitem>
                                    <para>ZIP</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Intended usage</term>
                    <listitem>
                        <para>COMMON</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Restrictions on usage</term>
                    <listitem>
                        <para>None.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Person to contact for further information</term>
                    <listitem>
                        <variablelist>
                            <varlistentry>
                                <term>Name</term>
                                <listitem>
                                    <para>Markus Gylling</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Email</term>
                                <listitem>
                                    <para>mgylling@daisy.org</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Author/Change controller</term>
                                <listitem>
                                    <para> The Z39.98-AI specification is maintained by the Technical
                                        Advisory Committee of the DAISY Consortium. </para>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>

    </appendix>
    
    <bibliography xml:id="informative-references">
        <title>Informative References</title>
        
        <para>This specification makes reference to the following informative resources:</para>
        
        <!-- note when adding "et al." to the end of a personname field, omit the terminating period; one is auto-generated after -->

        <bibliodiv>
            <title/>
            <biblioentry xml:id="refCMOS">
                <abbrev>CMoS</abbrev>
                <title>The Chicago Manual of Style. 16th ed</title>
                <orgname>Chicago: The University of Chicago Press, 2010</orgname>
                <bibliosource>Online version available at: <link xlink:href="http://www.chicagomanualofstyle.org/home.html">http://www.chicagomanualofstyle.org/home.html</link></bibliosource>
            </biblioentry>
            <biblioentry xml:id="refMATHML">
                <abbrev>MathML</abbrev>
                <title>Mathematical Markup Language (MathML) Version 3.0</title>
                <author>
                    <personname>D. Carlisle, et al</personname>
                </author>
                <date>21 October 2010</date>
                <orgname>W3C (World Wide Web Consortium)</orgname>
                <bibliosource><link xlink:href="http://www.w3.org/TR/2010/REC-MathML3-20101021/">http://www.w3.org/TR/2010/REC-MathML3-20101021/</link></bibliosource>
            </biblioentry>
            <biblioentry xml:id="refN3">
                <abbrev>N3</abbrev>
                <title>W3C Team Submission: Notation3 (N3): A readable RDF syntax</title>
                <editor>
                    <personname>Berners-Lee, Tim</personname>
                </editor>
                <date>28 March 2011</date>
                <orgname>W3C (World Wide Web Consortium)</orgname>
                <bibliosource><link xlink:href="http://www.w3.org/TeamSubmission/2011/SUBM-n3-20110328/">http://www.w3.org/TeamSubmission/2011/SUBM-n3-20110328/</link></bibliosource>   
            </biblioentry>
            <biblioentry xml:id="refOPF">
                <abbrev>OPF</abbrev>
                <title>Open Packaging Format (OPF) 2.0 v1.0</title>
                <date>11 September 2007</date>
                <orgname>IDPF (International Digital Publishing Forum)</orgname>
                <bibliosource><link xlink:href="http://www.idpf.org/2007/opf/OPF_2.0_final_spec.html">http://www.idpf.org/2007/opf/OPF_2.0_final_spec.html</link></bibliosource>
            </biblioentry>
            <biblioentry xml:id="refRDFs">
                <abbrev>RDFS</abbrev>
                <title>RDF Vocabulary Description Language 1.0: RDF Schema</title>
                <editor>
                    <personname>D. Brickley, et al</personname>
                </editor>
                <date>10 February 2004</date>
                <orgname>W3C (World Wide Web Consortium)</orgname>
                <bibliosource><link xlink:href="http://www.w3.org/TR/2004/REC-rdf-schema-20040210/">http://www.w3.org/TR/2004/REC-rdf-schema-20040210/</link></bibliosource>
            </biblioentry>
            <!--
                <biblioentry xml:id="refRDDL">
                <abbrev>RDDL</abbrev>
                <title>
                <link xlink:href="http://www.rddl.org/">Resource Directory Description Language
                (RDDL)</link>
                </title>
                <editor>
                <personname>J. Borden, T. Bray</personname>
                </editor>
                <date>1 March 2001</date>
                </biblioentry>
            -->
            <biblioentry xml:id="refROLE">
                <abbrev>ROLE</abbrev>
                <title>W3C Working Draft: Role Attribute 1.0</title>
                <author>
                    <personname>Shane McCarron, et al</personname>
                </author>
                <date>5 December 2010</date>
                <orgname>W3C (World Wide Web Consortium)</orgname>
                <bibliosource><link xlink:href="http://www.w3.org/WAI/PF/role-attribute/">http://www.w3.org/WAI/PF/role-attribute/</link></bibliosource>
            </biblioentry>
            <biblioentry xml:id="refXPROC">
                <abbrev>XProc</abbrev>
                <title>XProc: An XML Pipeline Language</title>
                <author>
                    <personname>Norman Walsh, et al</personname>
                </author>
                <date>9 March 2010</date>
                <orgname>W3C (World Wide Web Consortium)</orgname>
                <bibliosource><link xlink:href="http://www.w3.org/TR/2010/REC-xproc-20100511/">http://www.w3.org/TR/2010/REC-xproc-20100511/</link></bibliosource>
            </biblioentry>
            <biblioentry xml:id="refZ39862005">
                <abbrev>Z39.86-2005</abbrev>
                <title>ANSI/NISO Z39.86-2005: Specifications for the Digital Talking Book</title>
                <author>
                    <personname>M. Moodie, et al</personname>
                </author>
                <date>2005</date>
                <bibliosource><link xlink:href="http://www.niso.org/standards/resources/Z39-86-2005.html">http://www.niso.org/standards/resources/Z39-86-2005.html</link></bibliosource>
            </biblioentry>
        </bibliodiv>
    </bibliography>
    
</book>
